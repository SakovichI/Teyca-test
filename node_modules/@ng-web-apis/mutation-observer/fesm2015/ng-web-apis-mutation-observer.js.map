{"version":3,"file":"ng-web-apis-mutation-observer.js","sources":["../../../libs/mutation-observer/src/classes/safe-observer.ts","../../../libs/mutation-observer/src/tokens/mutation-observer-init.ts","../../../libs/mutation-observer/src/utils/boolean-attribute.ts","../../../libs/mutation-observer/src/utils/mutation-observer-init-factory.ts","../../../libs/mutation-observer/src/directives/mutation-observer.directive.ts","../../../libs/mutation-observer/src/services/mutation-observer.service.ts","../../../libs/mutation-observer/src/module.ts","../../../libs/mutation-observer/src/index.ts","../../../libs/mutation-observer/src/ng-web-apis-mutation-observer.ts"],"sourcesContent":["export const SafeObserver =\n    typeof MutationObserver !== `undefined`\n        ? MutationObserver\n        : class implements MutationObserver {\n              observe(): void {}\n              disconnect(): void {}\n              takeRecords(): MutationRecord[] {\n                  return [];\n              }\n          };\n","import {InjectionToken} from '@angular/core';\n\nexport const MUTATION_OBSERVER_INIT = new InjectionToken<MutationObserverInit>(\n    'MutationObserver config',\n);\n","export function booleanAttribute(element: Element, attribute: string): true | undefined {\n    return element.getAttribute(attribute) !== null || undefined;\n}\n","import {ElementRef} from '@angular/core';\nimport {booleanAttribute} from './boolean-attribute';\n\nexport function mutationObserverInitFactory({\n    nativeElement,\n}: ElementRef<Element>): MutationObserverInit {\n    const attributeFilter = nativeElement.getAttribute('attributeFilter');\n\n    return {\n        attributeFilter: attributeFilter?.split(',').map(attr => attr.trim()),\n        attributeOldValue: booleanAttribute(nativeElement, 'attributeOldValue'),\n        attributes: booleanAttribute(nativeElement, 'attributes'),\n        characterData: booleanAttribute(nativeElement, 'characterData'),\n        characterDataOldValue: booleanAttribute(nativeElement, 'characterDataOldValue'),\n        childList: booleanAttribute(nativeElement, 'childList'),\n        subtree: booleanAttribute(nativeElement, 'subtree'),\n    };\n}\n","import {\n    Attribute,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    OnDestroy,\n    Output,\n} from '@angular/core';\n\nimport {SafeObserver} from '../classes/safe-observer';\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\nimport {mutationObserverInitFactory} from '../utils/mutation-observer-init-factory';\n\n@Directive({\n    selector: '[waMutationObserver]',\n    exportAs: 'MutationObserver',\n    providers: [\n        {\n            provide: MUTATION_OBSERVER_INIT,\n            deps: [ElementRef],\n            useFactory: mutationObserverInitFactory,\n        },\n    ],\n})\nexport class MutationObserverDirective extends SafeObserver implements OnDestroy {\n    @Output()\n    readonly waMutationObserver = new EventEmitter<MutationRecord[]>();\n\n    constructor(\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\n        @Attribute('attributeFilter') _1: unknown,\n        @Attribute('attributeOldValue') _2: unknown,\n        @Attribute('attributes') _3: unknown,\n        @Attribute('characterData') _4: unknown,\n        @Attribute('characterDataOldValue') _5: unknown,\n        @Attribute('childList') _6: unknown,\n        @Attribute('subtree') _7: unknown,\n    ) {\n        super(records => {\n            this.waMutationObserver.emit(records);\n        });\n\n        this.observe(nativeElement, config);\n    }\n\n    ngOnDestroy(): void {\n        this.disconnect();\n    }\n}\n","import {ElementRef, Inject, Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\n\nimport {SafeObserver} from '../classes/safe-observer';\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\n\n@Injectable()\nexport class MutationObserverService extends Observable<readonly MutationRecord[]> {\n    constructor(\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\n    ) {\n        super(subscriber => {\n            const observer = new SafeObserver(records => {\n                subscriber.next(records);\n            });\n\n            observer.observe(nativeElement, config);\n\n            return () => {\n                observer.disconnect();\n            };\n        });\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {MutationObserverDirective} from './directives/mutation-observer.directive';\n\n@NgModule({\n    declarations: [MutationObserverDirective],\n    exports: [MutationObserverDirective],\n})\nexport class MutationObserverModule {}\n","/**\n * Public API Surface of @ng-web-apis/mutation-observer\n */\n\nexport * from './directives/mutation-observer.directive';\nexport * from './services/mutation-observer.service';\nexport * from './tokens/mutation-observer-init';\nexport * from './module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}