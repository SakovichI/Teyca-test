import { ChangeDetectionStrategy, Component, ElementRef, Inject, Input, ViewChild, ViewChildren, } from '@angular/core';
import { EMPTY_QUERY } from '@taiga-ui/cdk';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
const OPTIONS = {
    duration: 20,
    easing: 'ease-in',
    fill: 'forwards',
};
export class TuiBottomSheetComponent {
    constructor(el) {
        this.el = el;
        this.elements = EMPTY_QUERY;
        this.stops = ['1.5rem'];
    }
    onScroll() {
        var _a, _b;
        const { clientHeight, scrollTop, scrollHeight } = this.el.nativeElement;
        const top = ((_a = this.elements.get(0)) === null || _a === void 0 ? void 0 : _a.nativeElement.clientHeight) || 0;
        const max = ((_b = this.content) === null || _b === void 0 ? void 0 : _b.nativeElement.clientHeight) || Infinity;
        const height = Math.min(clientHeight, max);
        const scrolled = Math.min(scrollTop, height - top);
        const transform = `translate3d(0, ${-1 * scrolled}px, 0)`;
        this.el.nativeElement.style.setProperty('--t-height', `${scrollHeight}px`);
        this.el.nativeElement.animate([{ transform }], OPTIONS);
    }
}
TuiBottomSheetComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: TuiBottomSheetComponent, deps: [{ token: ElementRef }], target: i0.ɵɵFactoryTarget.Component });
TuiBottomSheetComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: TuiBottomSheetComponent, selector: "tui-bottom-sheet", inputs: { stops: "stops" }, host: { listeners: { "scroll.silent": "onScroll()" }, properties: { "style.--t-start": "stops[0]", "style.scroll-snap-type": "stops.length > 1 ? \"y mandatory\" : null" } }, viewQueries: [{ propertyName: "content", first: true, predicate: ["content"], descendants: true }, { propertyName: "elements", predicate: ["stops"], descendants: true }], ngImport: i0, template: "<div\n    *ngFor=\"let stop of stops\"\n    #stops\n    class=\"t-stop\"\n    [style.top]=\"stop\"\n></div>\n<div\n    #content\n    class=\"t-content\"\n>\n    <ng-content></ng-content>\n</div>\n<div class=\"t-bottom\"></div>\n", styles: [":host{scrollbar-width:none;-ms-overflow-style:none;position:absolute;top:100%;left:0;right:0;display:block;block-size:calc(100% - 1rem);max-inline-size:40rem;margin:calc(-1 * var(--t-start)) auto 0;background:var(--tui-elevation-01);border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l);overflow:auto;box-shadow:0 1rem var(--tui-elevation-01),var(--tui-shadow)}:host::-webkit-scrollbar,:host::-webkit-scrollbar-thumb{display:none}:host:before{content:\"\";position:-webkit-sticky;position:sticky;top:.625rem;left:50%;z-index:1;display:block;inline-size:2rem;block-size:.25rem;-webkit-margin-after:-.25rem;margin-block-end:-.25rem;transform:translate(-50%);background:var(--tui-elevation-01);box-shadow:0 0 0 20rem var(--tui-elevation-01),inset 0 0 0 1rem var(--tui-base-03);border-radius:1rem;-webkit-clip-path:polygon(-100vw -1rem,100vw -1rem,100vw calc(100% + .625rem),-100vw calc(100% + .625rem));clip-path:polygon(-100vw -1rem,100vw -1rem,100vw calc(100% + .625rem),-100vw calc(100% + .625rem))}:host:after{content:\"\";position:absolute;top:calc(100% - var(--t-start));inline-size:1rem;block-size:calc(var(--t-height) - 100% + var(--t-start));scroll-snap-align:start;scroll-snap-stop:always}.t-content{position:-webkit-sticky;position:sticky;top:0;padding:2.25rem 1rem 1.5rem}.t-bottom{block-size:calc(100% - var(--t-start))}.t-stop{position:absolute;block-size:var(--t-start);inline-size:1rem;pointer-events:none;transform:translateY(-100%);scroll-snap-align:start;scroll-snap-stop:always}.t-stop:last-child{scroll-snap-align:none}\n"], directives: [{ type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: TuiBottomSheetComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'tui-bottom-sheet',
                    templateUrl: './bottom-sheet.template.html',
                    styleUrls: ['./bottom-sheet.style.less'],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    host: {
                        '[style.--t-start]': 'stops[0]',
                        '[style.scroll-snap-type]': 'stops.length > 1 ? "y mandatory" : null',
                        '(scroll.silent)': 'onScroll()',
                    },
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef, decorators: [{
                    type: Inject,
                    args: [ElementRef]
                }] }]; }, propDecorators: { elements: [{
                type: ViewChildren,
                args: ['stops']
            }], content: [{
                type: ViewChild,
                args: ['content']
            }], stops: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm90dG9tLXNoZWV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FkZG9uLW1vYmlsZS9jb21wb25lbnRzL2JvdHRvbS1zaGVldC9ib3R0b20tc2hlZXQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYWRkb24tbW9iaWxlL2NvbXBvbmVudHMvYm90dG9tLXNoZWV0L2JvdHRvbS1zaGVldC50ZW1wbGF0ZS5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCx1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFVBQVUsRUFDVixNQUFNLEVBQ04sS0FBSyxFQUVMLFNBQVMsRUFDVCxZQUFZLEdBQ2YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGVBQWUsQ0FBQzs7O0FBRTFDLE1BQU0sT0FBTyxHQUFHO0lBQ1osUUFBUSxFQUFFLEVBQUU7SUFDWixNQUFNLEVBQUUsU0FBUztJQUNqQixJQUFJLEVBQUUsVUFBVTtDQUNWLENBQUM7QUFhWCxNQUFNLE9BQU8sdUJBQXVCO0lBVWhDLFlBQWlELEVBQTJCO1FBQTNCLE9BQUUsR0FBRixFQUFFLENBQXlCO1FBUjNELGFBQVEsR0FBdUMsV0FBVyxDQUFDO1FBTTVFLFVBQUssR0FBc0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUV5QyxDQUFDO0lBRWhGLFFBQVE7O1FBQ0osTUFBTSxFQUFDLFlBQVksRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUM7UUFDdEUsTUFBTSxHQUFHLEdBQUcsQ0FBQSxNQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQywwQ0FBRSxhQUFhLENBQUMsWUFBWSxLQUFJLENBQUMsQ0FBQztRQUNsRSxNQUFNLEdBQUcsR0FBRyxDQUFBLE1BQUEsSUFBSSxDQUFDLE9BQU8sMENBQUUsYUFBYSxDQUFDLFlBQVksS0FBSSxRQUFRLENBQUM7UUFDakUsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDM0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sU0FBUyxHQUFHLGtCQUFrQixDQUFDLENBQUMsR0FBRyxRQUFRLFFBQVEsQ0FBQztRQUUxRCxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRSxHQUFHLFlBQVksSUFBSSxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBQyxTQUFTLEVBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzFELENBQUM7O3FIQXRCUSx1QkFBdUIsa0JBVVosVUFBVTt5R0FWckIsdUJBQXVCLDZhQzdCcEMsc09BYUE7NEZEZ0JhLHVCQUF1QjtrQkFYbkMsU0FBUzttQkFBQztvQkFDUCxRQUFRLEVBQUUsa0JBQWtCO29CQUM1QixXQUFXLEVBQUUsOEJBQThCO29CQUMzQyxTQUFTLEVBQUUsQ0FBQywyQkFBMkIsQ0FBQztvQkFDeEMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07b0JBQy9DLElBQUksRUFBRTt3QkFDRixtQkFBbUIsRUFBRSxVQUFVO3dCQUMvQiwwQkFBMEIsRUFBRSx5Q0FBeUM7d0JBQ3JFLGlCQUFpQixFQUFFLFlBQVk7cUJBQ2xDO2lCQUNKOzswQkFXZ0IsTUFBTTsyQkFBQyxVQUFVOzRDQVJiLFFBQVE7c0JBRHhCLFlBQVk7dUJBQUMsT0FBTztnQkFJSixPQUFPO3NCQUR2QixTQUFTO3VCQUFDLFNBQVM7Z0JBSXBCLEtBQUs7c0JBREosS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gICAgQ29tcG9uZW50LFxuICAgIEVsZW1lbnRSZWYsXG4gICAgSW5qZWN0LFxuICAgIElucHV0LFxuICAgIFF1ZXJ5TGlzdCxcbiAgICBWaWV3Q2hpbGQsXG4gICAgVmlld0NoaWxkcmVuLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7RU1QVFlfUVVFUll9IGZyb20gJ0B0YWlnYS11aS9jZGsnO1xuXG5jb25zdCBPUFRJT05TID0ge1xuICAgIGR1cmF0aW9uOiAyMCxcbiAgICBlYXNpbmc6ICdlYXNlLWluJyxcbiAgICBmaWxsOiAnZm9yd2FyZHMnLFxufSBhcyBjb25zdDtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd0dWktYm90dG9tLXNoZWV0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYm90dG9tLXNoZWV0LnRlbXBsYXRlLmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2JvdHRvbS1zaGVldC5zdHlsZS5sZXNzJ10sXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgaG9zdDoge1xuICAgICAgICAnW3N0eWxlLi0tdC1zdGFydF0nOiAnc3RvcHNbMF0nLFxuICAgICAgICAnW3N0eWxlLnNjcm9sbC1zbmFwLXR5cGVdJzogJ3N0b3BzLmxlbmd0aCA+IDEgPyBcInkgbWFuZGF0b3J5XCIgOiBudWxsJyxcbiAgICAgICAgJyhzY3JvbGwuc2lsZW50KSc6ICdvblNjcm9sbCgpJyxcbiAgICB9LFxufSlcbmV4cG9ydCBjbGFzcyBUdWlCb3R0b21TaGVldENvbXBvbmVudCB7XG4gICAgQFZpZXdDaGlsZHJlbignc3RvcHMnKVxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudHM6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPEhUTUxFbGVtZW50Pj4gPSBFTVBUWV9RVUVSWTtcblxuICAgIEBWaWV3Q2hpbGQoJ2NvbnRlbnQnKVxuICAgIHByaXZhdGUgcmVhZG9ubHkgY29udGVudD86IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuXG4gICAgQElucHV0KClcbiAgICBzdG9wczogcmVhZG9ubHkgc3RyaW5nW10gPSBbJzEuNXJlbSddO1xuXG4gICAgY29uc3RydWN0b3IoQEluamVjdChFbGVtZW50UmVmKSBwcml2YXRlIHJlYWRvbmx5IGVsOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50Pikge31cblxuICAgIG9uU2Nyb2xsKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7Y2xpZW50SGVpZ2h0LCBzY3JvbGxUb3AsIHNjcm9sbEhlaWdodH0gPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHRvcCA9IHRoaXMuZWxlbWVudHMuZ2V0KDApPy5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodCB8fCAwO1xuICAgICAgICBjb25zdCBtYXggPSB0aGlzLmNvbnRlbnQ/Lm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IEluZmluaXR5O1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1pbihjbGllbnRIZWlnaHQsIG1heCk7XG4gICAgICAgIGNvbnN0IHNjcm9sbGVkID0gTWF0aC5taW4oc2Nyb2xsVG9wLCBoZWlnaHQgLSB0b3ApO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwgJHstMSAqIHNjcm9sbGVkfXB4LCAwKWA7XG5cbiAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXQtaGVpZ2h0JywgYCR7c2Nyb2xsSGVpZ2h0fXB4YCk7XG4gICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5hbmltYXRlKFt7dHJhbnNmb3JtfV0sIE9QVElPTlMpO1xuICAgIH1cbn1cbiIsIjxkaXZcbiAgICAqbmdGb3I9XCJsZXQgc3RvcCBvZiBzdG9wc1wiXG4gICAgI3N0b3BzXG4gICAgY2xhc3M9XCJ0LXN0b3BcIlxuICAgIFtzdHlsZS50b3BdPVwic3RvcFwiXG4+PC9kaXY+XG48ZGl2XG4gICAgI2NvbnRlbnRcbiAgICBjbGFzcz1cInQtY29udGVudFwiXG4+XG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuPC9kaXY+XG48ZGl2IGNsYXNzPVwidC1ib3R0b21cIj48L2Rpdj5cbiJdfQ==