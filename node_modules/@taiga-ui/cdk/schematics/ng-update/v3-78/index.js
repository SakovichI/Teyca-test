"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateToV3_78 = void 0;
const ng_morph_1 = require("ng-morph");
const colored_log_1 = require("../../utils/colored-log");
const get_file_system_1 = require("../utils/get-file-system");
const replace_text_1 = require("../utils/replace-text");
const icons_1 = require("./constants/icons");
function hasProprietaryCore(tree) {
    return !!ng_morph_1.getPackageJsonDependency(tree, '@taiga-ui/proprietary-core');
}
function updateToV3_78(options) {
    return (tree, _) => {
        if (!hasProprietaryCore(tree)) {
            !options['skip-logs'] &&
                colored_log_1.titleLog(`${colored_log_1.FINISH_SYMBOL} No migrations required\n`);
            return;
        }
        const fileSystem = get_file_system_1.getFileSystem(tree);
        !options['skip-logs'] &&
            colored_log_1.infoLog(`${colored_log_1.SMALL_TAB_SYMBOL}${colored_log_1.REPLACE_SYMBOL} replacing deprecated logos...`);
        replace_text_1.replaceText(icons_1.ICONS);
        fileSystem.commitEdits();
        ng_morph_1.saveActiveProject();
        !options['skip-logs'] &&
            colored_log_1.titleLog(`${colored_log_1.FINISH_SYMBOL} Icons successfully migrated \n`);
    };
}
exports.updateToV3_78 = updateToV3_78;
