{
  "version": 3,
  "sources": ["../../../../../../node_modules/@tinkoff/ng-polymorpheus/fesm2015/tinkoff-ng-polymorpheus.js"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { InjectionToken, Injector, Directive, Self, TemplateRef, ChangeDetectorRef, ComponentFactoryResolver, NgModule } from '@angular/core';\n\n/**\n * Use this token to access context within your components when\n * instantiating them through {@link PolymorpheusOutletDirective}\n */\nconst POLYMORPHEUS_CONTEXT = new InjectionToken('POLYMORPHEUS_CONTEXT');\n\n/**\n * Wrapper class for a component that will be used as content for {@link PolymorpheusOutletDirective}\n *\n * @param component — an Angular component to be dynamically created\n * @param injector — optional {@link Injector} for lazy loaded module case\n *\n * TODO: Remove second generic as it is irrelevant, remove `null` from injector type\n */\nclass PolymorpheusComponent {\n  constructor(component, i) {\n    this.component = component;\n    this.i = i;\n  }\n  createInjector(injector, useValue) {\n    return Injector.create({\n      parent: this.i || injector,\n      providers: [{\n        provide: POLYMORPHEUS_CONTEXT,\n        useValue\n      }]\n    });\n  }\n}\n\n/**\n * ng-template wrapper directive also stores {@link ChangeDetectorRef} to properly handle change detection.\n */\nclass PolymorpheusTemplate {\n  constructor(template, cdr) {\n    this.template = template;\n    this.cdr = cdr;\n    this.polymorpheus = '';\n  }\n  check() {\n    this.cdr.markForCheck();\n  }\n  static ngTemplateContextGuard(_dir, _ctx) {\n    return true;\n  }\n}\n/** @nocollapse */\nPolymorpheusTemplate.ɵfac = function PolymorpheusTemplate_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || PolymorpheusTemplate)(i0.ɵɵdirectiveInject(i0.TemplateRef, 2), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n/** @nocollapse */\nPolymorpheusTemplate.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: PolymorpheusTemplate,\n  selectors: [[\"ng-template\", \"polymorpheus\", \"\"]],\n  inputs: {\n    polymorpheus: \"polymorpheus\"\n  },\n  exportAs: [\"polymorpheus\"],\n  standalone: false\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PolymorpheusTemplate, [{\n    type: Directive,\n    args: [{\n      selector: 'ng-template[polymorpheus]',\n      exportAs: 'polymorpheus',\n      inputs: ['polymorpheus']\n    }]\n  }], function () {\n    return [{\n      type: i0.TemplateRef,\n      decorators: [{\n        type: Self\n      }]\n    }, {\n      type: i0.ChangeDetectorRef\n    }];\n  }, null);\n})();\nclass PolymorpheusContext {\n  constructor($implicit) {\n    this.$implicit = $implicit;\n  }\n  get polymorpheusOutlet() {\n    return this.$implicit;\n  }\n}\n/**\n * @deprecated: use {@link PolymorpheusContext} instead\n * Primitive types used as content by {@link PolymorpheusOutletDirective}\n */\nclass PrimitiveContext extends PolymorpheusContext {}\nclass PolymorpheusOutletDirective {\n  constructor(vcr, i, t) {\n    this.vcr = vcr;\n    this.i = i;\n    this.t = t;\n    this.content = '';\n  }\n  get template() {\n    if (isDirective(this.content)) {\n      return this.content.template;\n    }\n    return this.content instanceof TemplateRef ? this.content : this.t;\n  }\n  ngOnChanges({\n    content\n  }) {\n    var _a;\n    const context = this.getContext();\n    (_a = this.c) === null || _a === void 0 ? void 0 : _a.injector.get(ChangeDetectorRef).markForCheck();\n    if (!content) {\n      return;\n    }\n    this.vcr.clear();\n    const proxy = context && new Proxy(context, {\n      get: (_, key) => {\n        var _a;\n        return (_a = this.getContext()) === null || _a === void 0 ? void 0 : _a[key];\n      }\n    });\n    if (isComponent(this.content)) {\n      this.process(this.content, proxy);\n    } else if (\n    // tslint:disable-next-line:triple-equals\n    (context instanceof PolymorpheusContext && context.$implicit) != null) {\n      this.vcr.createEmbeddedView(this.template, proxy);\n    }\n  }\n  ngDoCheck() {\n    if (isDirective(this.content)) {\n      this.content.check();\n    }\n  }\n  static ngTemplateContextGuard(_dir, _ctx) {\n    return true;\n  }\n  getContext() {\n    if (isTemplate(this.content) || isComponent(this.content)) {\n      return this.context;\n    }\n    return new PolymorpheusContext(typeof this.content === 'function' ? this.content(this.context) : this.content);\n  }\n  process(content, proxy) {\n    const injector = content.createInjector(this.i, proxy);\n    this.c = this.vcr.createComponent(injector.get(ComponentFactoryResolver).resolveComponentFactory(content.component), 0, injector);\n  }\n}\n/** @nocollapse */\nPolymorpheusOutletDirective.ɵfac = function PolymorpheusOutletDirective_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || PolymorpheusOutletDirective)(i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i0.TemplateRef));\n};\n/** @nocollapse */\nPolymorpheusOutletDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: PolymorpheusOutletDirective,\n  selectors: [[\"\", \"polymorpheusOutlet\", \"\"]],\n  inputs: {\n    content: [0, \"polymorpheusOutlet\", \"content\"],\n    context: [0, \"polymorpheusOutletContext\", \"context\"]\n  },\n  standalone: false,\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PolymorpheusOutletDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[polymorpheusOutlet]',\n      inputs: ['content: polymorpheusOutlet', 'context: polymorpheusOutletContext']\n    }]\n  }], function () {\n    return [{\n      type: i0.ViewContainerRef\n    }, {\n      type: i0.Injector\n    }, {\n      type: i0.TemplateRef\n    }];\n  }, null);\n})();\nfunction isDirective(content) {\n  return content instanceof PolymorpheusTemplate;\n}\nfunction isComponent(content) {\n  return content instanceof PolymorpheusComponent;\n}\nfunction isTemplate(content) {\n  return isDirective(content) || content instanceof TemplateRef;\n}\nclass PolymorpheusModule {}\n/** @nocollapse */\nPolymorpheusModule.ɵfac = function PolymorpheusModule_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || PolymorpheusModule)();\n};\n/** @nocollapse */\nPolymorpheusModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: PolymorpheusModule,\n  declarations: [PolymorpheusOutletDirective, PolymorpheusTemplate],\n  exports: [PolymorpheusOutletDirective, PolymorpheusTemplate]\n});\n/** @nocollapse */\nPolymorpheusModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PolymorpheusModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [PolymorpheusOutletDirective, PolymorpheusTemplate],\n      exports: [PolymorpheusOutletDirective, PolymorpheusTemplate]\n    }]\n  }], null, null);\n})();\n\n/**\n * Public API Surface of ng-polymorpheus\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { POLYMORPHEUS_CONTEXT, PolymorpheusComponent, PolymorpheusModule, PolymorpheusOutletDirective, PolymorpheusTemplate };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAOA,IAAM,uBAAuB,IAAI,eAAe,sBAAsB;AAUtE,IAAM,wBAAN,MAA4B;AAAA,EAC1B,YAAY,WAAW,GAAG;AACxB,SAAK,YAAY;AACjB,SAAK,IAAI;AAAA,EACX;AAAA,EACA,eAAe,UAAU,UAAU;AACjC,WAAO,SAAS,OAAO;AAAA,MACrB,QAAQ,KAAK,KAAK;AAAA,MAClB,WAAW,CAAC;AAAA,QACV,SAAS;AAAA,QACT;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AACF;AAKA,IAAM,uBAAN,MAA2B;AAAA,EACzB,YAAY,UAAU,KAAK;AACzB,SAAK,WAAW;AAChB,SAAK,MAAM;AACX,SAAK,eAAe;AAAA,EACtB;AAAA,EACA,QAAQ;AACN,SAAK,IAAI,aAAa;AAAA,EACxB;AAAA,EACA,OAAO,uBAAuB,MAAM,MAAM;AACxC,WAAO;AAAA,EACT;AACF;AAEA,qBAAqB,OAAO,SAAS,6BAA6B,mBAAmB;AACnF,SAAO,KAAK,qBAAqB,sBAAyB,kBAAqB,aAAa,CAAC,GAAM,kBAAqB,iBAAiB,CAAC;AAC5I;AAEA,qBAAqB,OAAyB,kBAAkB;AAAA,EAC9D,MAAM;AAAA,EACN,WAAW,CAAC,CAAC,eAAe,gBAAgB,EAAE,CAAC;AAAA,EAC/C,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,UAAU,CAAC,cAAc;AAAA,EACzB,YAAY;AACd,CAAC;AAAA,CACA,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,iBAAkB,sBAAsB,CAAC;AAAA,IAC7F,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,MACV,QAAQ,CAAC,cAAc;AAAA,IACzB,CAAC;AAAA,EACH,CAAC,GAAG,WAAY;AACd,WAAO,CAAC;AAAA,MACN,MAAS;AAAA,MACT,YAAY,CAAC;AAAA,QACX,MAAM;AAAA,MACR,CAAC;AAAA,IACH,GAAG;AAAA,MACD,MAAS;AAAA,IACX,CAAC;AAAA,EACH,GAAG,IAAI;AACT,GAAG;AACH,IAAM,sBAAN,MAA0B;AAAA,EACxB,YAAY,WAAW;AACrB,SAAK,YAAY;AAAA,EACnB;AAAA,EACA,IAAI,qBAAqB;AACvB,WAAO,KAAK;AAAA,EACd;AACF;AAMA,IAAM,8BAAN,MAAkC;AAAA,EAChC,YAAY,KAAK,GAAG,GAAG;AACrB,SAAK,MAAM;AACX,SAAK,IAAI;AACT,SAAK,IAAI;AACT,SAAK,UAAU;AAAA,EACjB;AAAA,EACA,IAAI,WAAW;AACb,QAAI,YAAY,KAAK,OAAO,GAAG;AAC7B,aAAO,KAAK,QAAQ;AAAA,IACtB;AACA,WAAO,KAAK,mBAAmB,cAAc,KAAK,UAAU,KAAK;AAAA,EACnE;AAAA,EACA,YAAY;AAAA,IACV;AAAA,EACF,GAAG;AACD,QAAI;AACJ,UAAM,UAAU,KAAK,WAAW;AAChC,KAAC,KAAK,KAAK,OAAO,QAAQ,OAAO,SAAS,SAAS,GAAG,SAAS,IAAI,iBAAiB,EAAE,aAAa;AACnG,QAAI,CAAC,SAAS;AACZ;AAAA,IACF;AACA,SAAK,IAAI,MAAM;AACf,UAAM,QAAQ,WAAW,IAAI,MAAM,SAAS;AAAA,MAC1C,KAAK,CAAC,GAAG,QAAQ;AACf,YAAIA;AACJ,gBAAQA,MAAK,KAAK,WAAW,OAAO,QAAQA,QAAO,SAAS,SAASA,IAAG,GAAG;AAAA,MAC7E;AAAA,IACF,CAAC;AACD,QAAI,YAAY,KAAK,OAAO,GAAG;AAC7B,WAAK,QAAQ,KAAK,SAAS,KAAK;AAAA,IAClC;AAAA;AAAA,OAEC,mBAAmB,uBAAuB,QAAQ,cAAc;AAAA,MAAM;AACrE,WAAK,IAAI,mBAAmB,KAAK,UAAU,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EACA,YAAY;AACV,QAAI,YAAY,KAAK,OAAO,GAAG;AAC7B,WAAK,QAAQ,MAAM;AAAA,IACrB;AAAA,EACF;AAAA,EACA,OAAO,uBAAuB,MAAM,MAAM;AACxC,WAAO;AAAA,EACT;AAAA,EACA,aAAa;AACX,QAAI,WAAW,KAAK,OAAO,KAAK,YAAY,KAAK,OAAO,GAAG;AACzD,aAAO,KAAK;AAAA,IACd;AACA,WAAO,IAAI,oBAAoB,OAAO,KAAK,YAAY,aAAa,KAAK,QAAQ,KAAK,OAAO,IAAI,KAAK,OAAO;AAAA,EAC/G;AAAA,EACA,QAAQ,SAAS,OAAO;AACtB,UAAM,WAAW,QAAQ,eAAe,KAAK,GAAG,KAAK;AACrD,SAAK,IAAI,KAAK,IAAI,gBAAgB,SAAS,IAAI,0BAAwB,EAAE,wBAAwB,QAAQ,SAAS,GAAG,GAAG,QAAQ;AAAA,EAClI;AACF;AAEA,4BAA4B,OAAO,SAAS,oCAAoC,mBAAmB;AACjG,SAAO,KAAK,qBAAqB,6BAAgC,kBAAqB,gBAAgB,GAAM,kBAAqB,QAAQ,GAAM,kBAAqB,WAAW,CAAC;AAClL;AAEA,4BAA4B,OAAyB,kBAAkB;AAAA,EACrE,MAAM;AAAA,EACN,WAAW,CAAC,CAAC,IAAI,sBAAsB,EAAE,CAAC;AAAA,EAC1C,QAAQ;AAAA,IACN,SAAS,CAAC,GAAG,sBAAsB,SAAS;AAAA,IAC5C,SAAS,CAAC,GAAG,6BAA6B,SAAS;AAAA,EACrD;AAAA,EACA,YAAY;AAAA,EACZ,UAAU,CAAI,oBAAoB;AACpC,CAAC;AAAA,CACA,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,iBAAkB,6BAA6B,CAAC;AAAA,IACpG,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,UAAU;AAAA,MACV,QAAQ,CAAC,+BAA+B,oCAAoC;AAAA,IAC9E,CAAC;AAAA,EACH,CAAC,GAAG,WAAY;AACd,WAAO,CAAC;AAAA,MACN,MAAS;AAAA,IACX,GAAG;AAAA,MACD,MAAS;AAAA,IACX,GAAG;AAAA,MACD,MAAS;AAAA,IACX,CAAC;AAAA,EACH,GAAG,IAAI;AACT,GAAG;AACH,SAAS,YAAY,SAAS;AAC5B,SAAO,mBAAmB;AAC5B;AACA,SAAS,YAAY,SAAS;AAC5B,SAAO,mBAAmB;AAC5B;AACA,SAAS,WAAW,SAAS;AAC3B,SAAO,YAAY,OAAO,KAAK,mBAAmB;AACpD;AACA,IAAM,qBAAN,MAAyB;AAAC;AAE1B,mBAAmB,OAAO,SAAS,2BAA2B,mBAAmB;AAC/E,SAAO,KAAK,qBAAqB,oBAAoB;AACvD;AAEA,mBAAmB,OAAyB,iBAAiB;AAAA,EAC3D,MAAM;AAAA,EACN,cAAc,CAAC,6BAA6B,oBAAoB;AAAA,EAChE,SAAS,CAAC,6BAA6B,oBAAoB;AAC7D,CAAC;AAED,mBAAmB,OAAyB,iBAAiB,CAAC,CAAC;AAAA,CAC9D,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,iBAAkB,oBAAoB,CAAC;AAAA,IAC3F,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,cAAc,CAAC,6BAA6B,oBAAoB;AAAA,MAChE,SAAS,CAAC,6BAA6B,oBAAoB;AAAA,IAC7D,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,IAAI;AAChB,GAAG;",
  "names": ["_a"]
}
