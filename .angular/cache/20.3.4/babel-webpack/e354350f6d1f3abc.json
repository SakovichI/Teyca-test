{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, Component, ChangeDetectionStrategy, Input, Output, HostBinding, NgModule } from '@angular/core';\nimport * as i1 from '@taiga-ui/cdk';\nimport { TuiMonth, TUI_FIRST_DAY, TUI_LAST_DAY, ALWAYS_FALSE_HANDLER, TuiMonthRange, TuiYear, tuiInRange, TuiHoveredModule, TuiPressedModule, TuiRepeatTimesModule, TuiLetModule } from '@taiga-ui/cdk';\nimport { TuiInteractiveState, TuiRangeState } from '@taiga-ui/core/enums';\nimport * as i2 from '@taiga-ui/core/directives/scroll-into-view';\nimport { TuiScrollIntoViewModule } from '@taiga-ui/core/directives/scroll-into-view';\nfunction TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template_div_click_0_listener() {\n      const item_r2 = i0.ɵɵrestoreView(_r1).tuiLet;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.onItemClick(item_r2));\n    })(\"tuiHoveredChange\", function TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template_div_tuiHoveredChange_0_listener($event) {\n      const item_r2 = i0.ɵɵrestoreView(_r1).tuiLet;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.onItemHovered($event, item_r2));\n    })(\"tuiPressedChange\", function TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template_div_tuiPressedChange_0_listener($event) {\n      const item_r2 = i0.ɵɵrestoreView(_r1).tuiLet;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.onItemPressed($event, item_r2));\n    });\n    i0.ɵɵelementStart(1, \"div\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.tuiLet;\n    const ctx_r2 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"t-cell_interval\", ctx_r2.itemIsInterval(item_r2))(\"t-cell_today\", ctx_r2.itemIsToday(item_r2));\n    i0.ɵɵproperty(\"tuiScrollIntoView\", ctx_r2.scrollItemIntoView(item_r2));\n    i0.ɵɵattribute(\"data-range\", ctx_r2.getItemRange(item_r2))(\"data-state\", ctx_r2.getItemState(item_r2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2);\n  }\n}\nfunction TuiPrimitiveYearPickerComponent_div_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template, 3, 8, \"div\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const colIndex_r4 = ctx.$implicit;\n    const rowIndex_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"tuiLet\", ctx_r2.getItem(rowIndex_r5, colIndex_r4));\n  }\n}\nfunction TuiPrimitiveYearPickerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, TuiPrimitiveYearPickerComponent_div_0_ng_container_1_Template, 2, 1, \"ng-container\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"tuiRepeatTimesOf\", 4);\n  }\n}\nconst LIMIT = 100;\nconst ITEMS_IN_ROW = 4;\nlet TuiPrimitiveYearPickerComponent = /*#__PURE__*/(() => {\n  class TuiPrimitiveYearPickerComponent {\n    constructor() {\n      this.hoveredItem = null;\n      this.pressedItem = null;\n      this.currentYear = TuiMonth.currentLocal().year;\n      this.value = null;\n      this.initialItem = TuiMonth.currentLocal();\n      this.min = TUI_FIRST_DAY;\n      this.max = TUI_LAST_DAY;\n      this.disabledItemHandler = ALWAYS_FALSE_HANDLER;\n      this.yearClick = new EventEmitter();\n    }\n    get computedMin() {\n      var _a;\n      return (_a = this.min) !== null && _a !== void 0 ? _a : TUI_FIRST_DAY;\n    }\n    get computedMax() {\n      var _a;\n      return (_a = this.max) !== null && _a !== void 0 ? _a : TUI_LAST_DAY;\n    }\n    get isSingle() {\n      return this.isRange(this.value) && this.value.from.yearSame(this.value.to);\n    }\n    get rows() {\n      return Math.ceil((this.calculatedMax - this.calculatedMin) / ITEMS_IN_ROW);\n    }\n    get calculatedMin() {\n      const initial = this.initialItem.year - LIMIT;\n      const min = this.computedMin;\n      return min.year > initial ? min.year : initial;\n    }\n    get calculatedMax() {\n      const initial = this.initialItem.year + LIMIT;\n      const max = this.computedMax;\n      return max.year < initial ? max.year + 1 : initial;\n    }\n    isRange(item) {\n      return item instanceof TuiMonthRange;\n    }\n    scrollItemIntoView(item) {\n      return this.initialItem.year === item;\n    }\n    getItem(rowIndex, colIndex) {\n      return rowIndex * ITEMS_IN_ROW + colIndex + this.calculatedMin;\n    }\n    getItemState(item) {\n      const {\n        disabledItemHandler,\n        pressedItem,\n        hoveredItem\n      } = this;\n      const max = this.computedMax;\n      if (max.year < item || disabledItemHandler !== ALWAYS_FALSE_HANDLER && disabledItemHandler(item)) {\n        return TuiInteractiveState.Disabled;\n      }\n      if (pressedItem === item) {\n        return TuiInteractiveState.Active;\n      }\n      if (hoveredItem === item) {\n        return TuiInteractiveState.Hover;\n      }\n      return null;\n    }\n    getItemRange(item) {\n      const {\n        value,\n        hoveredItem\n      } = this;\n      if (value === null) {\n        return null;\n      }\n      if (value instanceof TuiYear) {\n        return value.year === item ? TuiRangeState.Single : null;\n      }\n      if (!(value instanceof TuiMonthRange)) {\n        return value.find(day => day.year === item) ? TuiRangeState.Single : null;\n      }\n      if (value.from.year === item && !value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem > value.from.year && value.from.year === item && value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem === item && hoveredItem < value.from.year && value.from.yearSame(value.to)) {\n        return TuiRangeState.Start;\n      }\n      if (value.to.year === item && !value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem < value.from.year && value.from.year === item && value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem === item && hoveredItem > value.from.year && value.from.yearSame(value.to)) {\n        return TuiRangeState.End;\n      }\n      return value.from.yearSame(value.to) && value.from.year === item ? TuiRangeState.Single : null;\n    }\n    itemIsToday(item) {\n      return this.currentYear === item;\n    }\n    itemIsInterval(item) {\n      const {\n        value,\n        hoveredItem\n      } = this;\n      if (value === null || !this.isRange(value)) {\n        return false;\n      }\n      if (!value.from.yearSame(value.to)) {\n        return value.from.year <= item && value.to.year > item;\n      }\n      if (hoveredItem === null || value.from.year === hoveredItem) {\n        return false;\n      }\n      return tuiInRange(item, Math.min(value.from.year, hoveredItem), Math.max(value.from.year, hoveredItem));\n    }\n    onItemHovered(hovered, item) {\n      this.updateHoveredItem(hovered, item);\n    }\n    onItemPressed(pressed, item) {\n      this.updatePressedItem(pressed, item);\n    }\n    onItemClick(item) {\n      this.yearClick.emit(new TuiYear(item));\n    }\n    updateHoveredItem(hovered, item) {\n      this.hoveredItem = hovered ? item : null;\n    }\n    updatePressedItem(pressed, item) {\n      this.pressedItem = pressed ? item : null;\n    }\n  }\n  TuiPrimitiveYearPickerComponent.ɵfac = function TuiPrimitiveYearPickerComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiPrimitiveYearPickerComponent)();\n  };\n  TuiPrimitiveYearPickerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiPrimitiveYearPickerComponent,\n    selectors: [[\"tui-primitive-year-picker\"]],\n    hostVars: 2,\n    hostBindings: function TuiPrimitiveYearPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"_single\", ctx.isSingle);\n      }\n    },\n    inputs: {\n      value: \"value\",\n      initialItem: \"initialItem\",\n      min: \"min\",\n      max: \"max\",\n      disabledItemHandler: \"disabledItemHandler\"\n    },\n    outputs: {\n      yearClick: \"yearClick\"\n    },\n    standalone: false,\n    decls: 1,\n    vars: 1,\n    consts: [[\"automation-id\", \"tui-primitive-year-picker__row\", \"class\", \"t-row\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"automation-id\", \"tui-primitive-year-picker__row\", 1, \"t-row\"], [4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"automation-id\", \"tui-primitive-year-picker__cell\", \"class\", \"t-cell\", 3, \"t-cell_interval\", \"t-cell_today\", \"tuiScrollIntoView\", \"click\", \"tuiHoveredChange\", \"tuiPressedChange\", 4, \"tuiLet\"], [\"automation-id\", \"tui-primitive-year-picker__cell\", 1, \"t-cell\", 3, \"click\", \"tuiHoveredChange\", \"tuiPressedChange\", \"tuiScrollIntoView\"], [1, \"t-item\"]],\n    template: function TuiPrimitiveYearPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TuiPrimitiveYearPickerComponent_div_0_Template, 2, 1, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.rows);\n      }\n    },\n    dependencies: [i1.TuiRepeatTimesDirective, i1.TuiLetDirective, i2.TuiScrollIntoViewDirective, i1.TuiHoveredDirective, i1.TuiPressedDirective],\n    styles: [\"[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;height:2.25rem;isolation:isolate}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:before, .t-item[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after{border-radius:.5rem}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:none;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:.125rem solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%);content:\\\"\\\";bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-01)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-.25rem;border-top-right-radius:0;border-bottom-right-radius:0}.t-cell_interval[_ngcontent-%COMP%]:not([data-range=\\\"start\\\"]):not(:first-child):before{border-top-left-radius:0;border-bottom-left-radius:0}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hover][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][data-state=hover][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=active][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][data-state=active][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell[data-range=end][_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell[data-range=end][_ngcontent-%COMP%]:not(:first-child):before{border-top-left-radius:0;border-bottom-left-radius:0}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.625rem;border-top-left-radius:0;border-bottom-left-radius:0}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translate(1.6rem) scaleY(.83) scaleX(.5) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.625rem;border-top-right-radius:0;border-bottom-right-radius:0}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translate(-1.6rem) scaleY(.83) scaleX(.5) rotate(45deg)}.t-cell[data-range=single][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{display:none}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hover][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=active][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{margin:.875rem 0}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}\"],\n    changeDetection: 0\n  });\n  return TuiPrimitiveYearPickerComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiPrimitiveYearPickerModule = /*#__PURE__*/(() => {\n  class TuiPrimitiveYearPickerModule {}\n  TuiPrimitiveYearPickerModule.ɵfac = function TuiPrimitiveYearPickerModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiPrimitiveYearPickerModule)();\n  };\n  TuiPrimitiveYearPickerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiPrimitiveYearPickerModule\n  });\n  TuiPrimitiveYearPickerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[TuiHoveredModule, TuiPressedModule, TuiRepeatTimesModule, TuiLetModule, TuiScrollIntoViewModule]]\n  });\n  return TuiPrimitiveYearPickerModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiPrimitiveYearPickerComponent, TuiPrimitiveYearPickerModule };\n//# sourceMappingURL=taiga-ui-core-components-primitive-year-picker.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}