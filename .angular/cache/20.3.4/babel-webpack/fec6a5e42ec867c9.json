{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { ChangeDetectorRef, Component, ChangeDetectionStrategy, Optional, Self, Inject, ViewChild, Input, HostListener, NgModule } from '@angular/core';\nimport * as i3 from '@angular/forms';\nimport { NgControl, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i2 from '@taiga-ui/cdk';\nimport { tuiCreateToken, tuiProvideOptions, AbstractTuiControl, tuiIsNativeFocused, tuiClamp, tuiAsFocusableItemAccessor, tuiAsControl, TuiFocusableModule, TuiRepeatTimesModule } from '@taiga-ui/cdk';\nimport * as i1 from '@taiga-ui/core';\nimport { TuiSvgModule } from '@taiga-ui/core';\nconst _c0 = [\"focusableElement\"];\nconst _c1 = [\"*\"];\nfunction TuiRatingComponent_tui_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tui-svg\", 8);\n    i0.ɵɵlistener(\"click\", function TuiRatingComponent_tui_svg_4_Template_tui_svg_click_0_listener() {\n      const index_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.setRateByReverseIndex(index_r3));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const index_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"t-icon-rating-last\", index_r3 === 0);\n    i0.ɵɵproperty(\"src\", ctx_r3.iconFilled);\n  }\n}\nfunction TuiRatingComponent_tui_svg_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-svg\", 9);\n  }\n  if (rf & 2) {\n    const index_r5 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"t-icon-rating-last\", index_r5 === 0);\n    i0.ɵɵproperty(\"src\", ctx_r3.iconFilled);\n  }\n}\nfunction TuiRatingComponent_tui_svg_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-svg\", 10);\n  }\n  if (rf & 2) {\n    const index_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"t-icon-rating-last\", ctx_r3.max - 1 === index_r6);\n    i0.ɵɵproperty(\"src\", ctx_r3.iconNormal);\n  }\n}\nconst TUI_RATING_DEFAULT_OPTIONS = {\n  min: 0,\n  max: 5,\n  iconNormal: 'tuiIconStarLarge',\n  iconFilled: 'tuiIconStarLarge'\n};\n/**\n * Default parameters for Rating component\n */\nconst TUI_RATING_OPTIONS = tuiCreateToken(TUI_RATING_DEFAULT_OPTIONS);\nfunction tuiRatingOptionsProvider(options) {\n  return tuiProvideOptions(TUI_RATING_OPTIONS, options, TUI_RATING_DEFAULT_OPTIONS);\n}\nlet TuiRatingComponent = /*#__PURE__*/(() => {\n  class TuiRatingComponent extends AbstractTuiControl {\n    constructor(ngControl, cdr, options) {\n      super(ngControl, cdr);\n      this.options = options;\n      this.min = this.options.min;\n      this.max = this.options.max;\n      this.iconNormal = this.options.iconNormal;\n      this.iconFilled = this.options.iconFilled;\n    }\n    get nativeFocusableElement() {\n      return this.computedDisabled || !this.focusableElement ? null : this.focusableElement.nativeElement;\n    }\n    get focused() {\n      return tuiIsNativeFocused(this.nativeFocusableElement);\n    }\n    get isFocusable() {\n      return !(this.readOnly || this.disabled);\n    }\n    get percent() {\n      return tuiClamp(100 * this.value / this.max, 0, 100);\n    }\n    onFocused(focused) {\n      this.updateFocused(focused);\n    }\n    setRateByReverseIndex(index) {\n      const reversedIndex = this.max - index;\n      if (reversedIndex <= this.min) {\n        return;\n      }\n      this.value = reversedIndex;\n    }\n    setRate(value) {\n      this.value = value;\n    }\n    getFallbackValue() {\n      return 0;\n    }\n  }\n  TuiRatingComponent.ɵfac = function TuiRatingComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiRatingComponent)(i0.ɵɵdirectiveInject(NgControl, 10), i0.ɵɵdirectiveInject(ChangeDetectorRef), i0.ɵɵdirectiveInject(TUI_RATING_OPTIONS));\n  };\n  TuiRatingComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiRatingComponent,\n    selectors: [[\"tui-rating\"]],\n    viewQuery: function TuiRatingComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.focusableElement = _t.first);\n      }\n    },\n    hostBindings: function TuiRatingComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"focusin\", function TuiRatingComponent_focusin_HostBindingHandler() {\n          return ctx.onFocused(true);\n        })(\"focusout\", function TuiRatingComponent_focusout_HostBindingHandler() {\n          return ctx.onFocused(false);\n        });\n      }\n    },\n    inputs: {\n      min: \"min\",\n      max: \"max\",\n      iconNormal: \"iconNormal\",\n      iconFilled: \"iconFilled\"\n    },\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([tuiAsFocusableItemAccessor(TuiRatingComponent), tuiAsControl(TuiRatingComponent)]), i0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c1,\n    decls: 10,\n    vars: 9,\n    consts: [[\"focusableElement\", \"\"], [1, \"t-host\"], [1, \"t-interactive\"], [\"class\", \"t-icon-rating t-icon-filled\", 3, \"t-icon-rating-last\", \"src\", \"click\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [1, \"t-wrapper\"], [\"class\", \"t-icon-rating t-icon-filled\", 3, \"t-icon-rating-last\", \"src\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"class\", \"t-icon-rating\", 3, \"t-icon-rating-last\", \"src\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"step\", \"1\", \"type\", \"range\", 1, \"t-input\", 3, \"ngModelChange\", \"max\", \"min\", \"ngModel\", \"tuiFocusable\"], [1, \"t-icon-rating\", \"t-icon-filled\", 3, \"click\", \"src\"], [1, \"t-icon-rating\", \"t-icon-filled\", 3, \"src\"], [1, \"t-icon-rating\", 3, \"src\"]],\n    template: function TuiRatingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"label\");\n        i0.ɵɵprojection(1);\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2);\n        i0.ɵɵtemplate(4, TuiRatingComponent_tui_svg_4_Template, 1, 3, \"tui-svg\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵtemplate(6, TuiRatingComponent_tui_svg_6_Template, 1, 3, \"tui-svg\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, TuiRatingComponent_tui_svg_7_Template, 1, 3, \"tui-svg\", 6);\n        i0.ɵɵelementStart(8, \"input\", 7, 0);\n        i0.ɵɵlistener(\"ngModelChange\", function TuiRatingComponent_Template_input_ngModelChange_8_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.setRate($event));\n        });\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n        i0.ɵɵadvance();\n        i0.ɵɵstyleProp(\"width\", ctx.percent, \"%\");\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"max\", ctx.max)(\"min\", ctx.min)(\"ngModel\", ctx.value)(\"tuiFocusable\", ctx.isFocusable);\n      }\n    },\n    dependencies: [i1.TuiSvgComponent, i2.TuiRepeatTimesDirective, i3.RangeValueAccessor, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.TuiFocusableDirective],\n    styles: [\"._readonly[_nghost-%COMP%], ._disabled[_nghost-%COMP%]{pointer-events:none}._disabled[_nghost-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-host[_ngcontent-%COMP%]{position:relative;display:inline-flex}.t-icon-rating[_ngcontent-%COMP%]{width:var(--tui-rating-size, 1.5rem);height:var(--tui-rating-size, 1.5rem);padding:0 var(--tui-rating-gap, 0) 0 0}.t-icon-rating-last[_ngcontent-%COMP%]{padding-right:0}.t-input[_ngcontent-%COMP%]{pointer-events:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent}.t-input[_ngcontent-%COMP%]::-webkit-slider-thumb{display:none}.t-input[_ngcontent-%COMP%]::-moz-range-thumb{opacity:0}.t-input[_ngcontent-%COMP%], .t-wrapper[_ngcontent-%COMP%], .t-interactive[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:100%;height:100%}.t-wrapper[_ngcontent-%COMP%], .t-interactive[_ngcontent-%COMP%]{display:inline-flex;overflow:hidden;flex-direction:row-reverse;justify-content:flex-end;white-space:nowrap}.t-wrapper[_ngcontent-%COMP%]{pointer-events:none}.t-interactive[_ngcontent-%COMP%]{opacity:0}@media (hover: hover) and (pointer: fine){.t-interactive[_ngcontent-%COMP%]:hover{opacity:1}.t-interactive[_ngcontent-%COMP%]:hover ~ .t-wrapper[_ngcontent-%COMP%]{visibility:hidden}.t-interactive[_ngcontent-%COMP%]:hover   .t-icon-filled[_ngcontent-%COMP%]{opacity:0}.t-interactive[_ngcontent-%COMP%]:hover   .t-icon-filled[_ngcontent-%COMP%]:hover, .t-interactive[_ngcontent-%COMP%]:hover   .t-icon-filled[_ngcontent-%COMP%]:hover ~ .t-icon-filled[_ngcontent-%COMP%]{opacity:1}}.t-icon-filled[_ngcontent-%COMP%]{position:relative;cursor:pointer;fill:currentColor}\"],\n    changeDetection: 0\n  });\n  return TuiRatingComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiRatingModule = /*#__PURE__*/(() => {\n  class TuiRatingModule {}\n  TuiRatingModule.ɵfac = function TuiRatingModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiRatingModule)();\n  };\n  TuiRatingModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiRatingModule\n  });\n  TuiRatingModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[TuiSvgModule, TuiFocusableModule, TuiRepeatTimesModule, FormsModule, ReactiveFormsModule]]\n  });\n  return TuiRatingModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_RATING_DEFAULT_OPTIONS, TUI_RATING_OPTIONS, TuiRatingComponent, TuiRatingModule, tuiRatingOptionsProvider };\n//# sourceMappingURL=taiga-ui-kit-components-rating.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}