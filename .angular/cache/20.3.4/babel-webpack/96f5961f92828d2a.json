{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, ChangeDetectorRef, ElementRef, Component, ChangeDetectionStrategy, Inject, Self, ContentChildren, forwardRef, Input, HostBinding, Output, HostListener, NgModule } from '@angular/core';\nimport * as i2 from '@taiga-ui/cdk';\nimport { EMPTY_QUERY, tuiQueryListChanges, tuiGetOriginalArrayFromQueryList, tuiIsElement, tuiMoveFocus, TuiScrollService, TuiResizeService, TuiDestroyService, tuiPure, TuiFocusVisibleService } from '@taiga-ui/cdk';\nimport * as i1$1 from '@taiga-ui/core';\nimport { TUI_ANIMATIONS_DURATION, TuiRouterLinkActiveService, TUI_COMMON_ICONS, TuiSvgModule } from '@taiga-ui/core';\nimport * as i3 from 'rxjs';\nimport { identity } from 'rxjs';\nimport { delay, takeUntil, filter } from 'rxjs/operators';\nimport { __decorate } from 'tslib';\nimport * as i1 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nconst _c0 = [\"*\"];\nfunction TuiStepperComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c1 = [\"tuiStep\", \"\"];\nfunction TuiStepComponent_tui_svg_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-svg\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.icon);\n  }\n}\nlet TuiStepperComponent = /*#__PURE__*/(() => {\n  class TuiStepperComponent {\n    constructor(cdr, el, scrollService, resize$, duration, destroy$) {\n      this.cdr = cdr;\n      this.el = el;\n      this.scrollService = scrollService;\n      this.duration = duration;\n      this.destroy$ = destroy$;\n      this.steps = EMPTY_QUERY;\n      this.orientation = 'horizontal';\n      this.activeItemIndexChange = new EventEmitter();\n      this.activeItemIndex = 0;\n      resize$.subscribe(() => this.scrollIntoView(this.activeItemIndex));\n    }\n    set activeIndex(index) {\n      this.activeItemIndex = index;\n      this.scrollIntoView(index);\n    }\n    get changes$() {\n      // Delay is required to trigger change detection after steps are rendered,\n      // so they can update their \"active\" status\n      return tuiQueryListChanges(this.steps).pipe(delay(0));\n    }\n    onHorizontal(event, step) {\n      if (this.orientation !== 'horizontal' || !event.target) {\n        return;\n      }\n      event.preventDefault();\n      this.moveFocus(event.target, step);\n    }\n    onVertical(event, step) {\n      if (this.orientation !== 'vertical' || !event.target) {\n        return;\n      }\n      event.preventDefault();\n      this.moveFocus(event.target, step);\n    }\n    indexOf(step) {\n      const index = tuiGetOriginalArrayFromQueryList(this.steps).findIndex(({\n        nativeElement\n      }) => nativeElement === step);\n      return index < 0 ? NaN : index;\n    }\n    isActive(index) {\n      return index === this.activeItemIndex;\n    }\n    activate(index) {\n      if (this.activeItemIndex === index) {\n        return;\n      }\n      this.activeItemIndex = index;\n      this.activeItemIndexChange.emit(index);\n      this.cdr.markForCheck();\n      this.scrollIntoView(index);\n    }\n    moveFocus(current, step) {\n      if (!tuiIsElement(current)) {\n        return;\n      }\n      const stepElements = this.steps.toArray().map(({\n        nativeElement\n      }) => nativeElement);\n      const index = stepElements.findIndex(element => element === current);\n      tuiMoveFocus(index, stepElements, step);\n    }\n    scrollIntoView(index) {\n      var _a;\n      const step = (_a = this.steps.get(index)) === null || _a === void 0 ? void 0 : _a.nativeElement;\n      if (!step) {\n        return;\n      }\n      const {\n        nativeElement\n      } = this.el;\n      const {\n        clientHeight,\n        clientWidth,\n        offsetTop,\n        offsetLeft\n      } = nativeElement;\n      const {\n        offsetHeight,\n        offsetWidth,\n        offsetTop: stepOffsetTop,\n        offsetLeft: stepOffsetLeft\n      } = step;\n      const top = stepOffsetTop - offsetTop - clientHeight / 2 + offsetHeight / 2;\n      const left = stepOffsetLeft - offsetLeft - clientWidth / 2 + offsetWidth / 2;\n      this.scrollService.scroll$(nativeElement, Math.max(0, top), Math.max(0, left), this.duration / 3).pipe(takeUntil(this.destroy$)).subscribe();\n    }\n  }\n  TuiStepperComponent.ɵfac = function TuiStepperComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiStepperComponent)(i0.ɵɵdirectiveInject(ChangeDetectorRef), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TuiScrollService), i0.ɵɵdirectiveInject(TuiResizeService), i0.ɵɵdirectiveInject(TUI_ANIMATIONS_DURATION), i0.ɵɵdirectiveInject(TuiDestroyService, 2));\n  };\n  TuiStepperComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiStepperComponent,\n    selectors: [[\"tui-stepper\"], [\"nav\", \"tuiStepper\", \"\"]],\n    contentQueries: function TuiStepperComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, TuiStepComponent, 4, ElementRef);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.steps = _t);\n      }\n    },\n    hostVars: 1,\n    hostBindings: function TuiStepperComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown.arrowRight\", function TuiStepperComponent_keydown_arrowRight_HostBindingHandler($event) {\n          return ctx.onHorizontal($event, 1);\n        })(\"keydown.arrowLeft\", function TuiStepperComponent_keydown_arrowLeft_HostBindingHandler($event) {\n          return ctx.onHorizontal($event, -1);\n        })(\"keydown.arrowDown\", function TuiStepperComponent_keydown_arrowDown_HostBindingHandler($event) {\n          return ctx.onVertical($event, 1);\n        })(\"keydown.arrowUp\", function TuiStepperComponent_keydown_arrowUp_HostBindingHandler($event) {\n          return ctx.onVertical($event, -1);\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵattribute(\"data-orientation\", ctx.orientation);\n      }\n    },\n    inputs: {\n      orientation: \"orientation\",\n      activeIndex: [0, \"activeItemIndex\", \"activeIndex\"]\n    },\n    outputs: {\n      activeItemIndexChange: \"activeItemIndexChange\"\n    },\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([TuiResizeService, TuiDestroyService])],\n    ngContentSelectors: _c0,\n    decls: 3,\n    vars: 3,\n    consts: [[4, \"ngIf\"]],\n    template: function TuiStepperComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵtemplate(0, TuiStepperComponent_ng_container_0_Template, 1, 0, \"ng-container\", 0);\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵprojection(2);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.changes$));\n      }\n    },\n    dependencies: [i1.NgIf, i1.AsyncPipe],\n    styles: [\"[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}tui-root._reduced-motion   [_nghost-%COMP%]{scroll-behavior:auto}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}\"],\n    changeDetection: 0\n  });\n  __decorate([tuiPure], TuiStepperComponent.prototype, \"changes$\", null);\n  return TuiStepperComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiStepComponent = /*#__PURE__*/(() => {\n  class TuiStepComponent {\n    constructor(focusVisible$, routerLinkActive$, stepper, el, icons) {\n      this.stepper = stepper;\n      this.el = el;\n      this.icons = icons;\n      this.stepState = 'normal';\n      this.icon = '';\n      this.focusVisible = false;\n      routerLinkActive$.pipe(filter(identity)).subscribe(() => {\n        this.activate();\n      });\n      focusVisible$.subscribe(visible => {\n        this.focusVisible = visible;\n      });\n    }\n    get isActive() {\n      return this.stepper.isActive(this.index);\n    }\n    get isVertical() {\n      return this.stepper.orientation === 'vertical';\n    }\n    get tabIndex() {\n      return this.isActive ? 0 : -1;\n    }\n    get index() {\n      return this.stepper.indexOf(this.el.nativeElement);\n    }\n    activate() {\n      this.stepper.activate(this.index);\n    }\n  }\n  TuiStepComponent.ɵfac = function TuiStepComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiStepComponent)(i0.ɵɵdirectiveInject(TuiFocusVisibleService), i0.ɵɵdirectiveInject(TuiRouterLinkActiveService), i0.ɵɵdirectiveInject(TuiStepperComponent), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TUI_COMMON_ICONS));\n  };\n  TuiStepComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiStepComponent,\n    selectors: [[\"button\", \"tuiStep\", \"\"], [\"a\", \"tuiStep\", \"\", 3, \"routerLink\", \"\"], [\"a\", \"tuiStep\", \"\", \"routerLink\", \"\", \"routerLinkActive\", \"\"]],\n    hostAttrs: [\"type\", \"button\"],\n    hostVars: 8,\n    hostBindings: function TuiStepComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function TuiStepComponent_click_HostBindingHandler() {\n          return ctx.activate();\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵdomProperty(\"tabIndex\", ctx.tabIndex);\n        i0.ɵɵattribute(\"data-state\", ctx.stepState);\n        i0.ɵɵclassProp(\"_focus-visible\", ctx.focusVisible)(\"_active\", ctx.isActive)(\"_vertical\", ctx.isVertical);\n      }\n    },\n    inputs: {\n      stepState: \"stepState\",\n      icon: \"icon\"\n    },\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([TuiDestroyService, TuiRouterLinkActiveService, TuiFocusVisibleService])],\n    attrs: _c1,\n    ngContentSelectors: _c0,\n    decls: 5,\n    vars: 3,\n    consts: [[\"class\", \"t-marker t-marker_custom\", 3, \"src\", 4, \"ngIf\"], [1, \"t-marker\", \"t-marker_error\", 3, \"src\"], [1, \"t-marker\", \"t-marker_pass\", 3, \"src\"], [1, \"t-marker\", \"t-marker_index\"], [1, \"t-marker\", \"t-marker_custom\", 3, \"src\"]],\n    template: function TuiStepComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵtemplate(0, TuiStepComponent_tui_svg_0_Template, 1, 1, \"tui-svg\", 0);\n        i0.ɵɵelement(1, \"tui-svg\", 1)(2, \"tui-svg\", 2)(3, \"div\", 3);\n        i0.ɵɵprojection(4);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.icon);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"src\", ctx.icons.error);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"src\", ctx.icons.check);\n      }\n    },\n    dependencies: [i1$1.TuiSvgComponent, i1.NgIf],\n    styles: [\"[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:1.5rem;outline:none;cursor:pointer;counter-increment:steps;text-align:left}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:\\\"\\\";position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.t-marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;align-self:flex-start;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .t-marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.t-marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not([data-state=\\\"normal\\\"]):not(._active)   .t-marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not(._active)   .t-marker_custom[_ngcontent-%COMP%] ~ .t-marker_index[_ngcontent-%COMP%]{display:none}.t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}[_nghost-%COMP%]:not([data-state=\\\"error\\\"])   .t-marker_error[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_error[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state=\\\"pass\\\"])   .t-marker_pass[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_pass[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state=\\\"normal\\\"])   .t-marker_custom[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .t-marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}\"],\n    changeDetection: 0\n  });\n  return TuiStepComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiStepperModule = /*#__PURE__*/(() => {\n  class TuiStepperModule {}\n  TuiStepperModule.ɵfac = function TuiStepperModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiStepperModule)();\n  };\n  TuiStepperModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiStepperModule\n  });\n  TuiStepperModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiSvgModule]]\n  });\n  return TuiStepperModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiStepComponent, TuiStepperComponent, TuiStepperModule };\n//# sourceMappingURL=taiga-ui-kit-components-stepper.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}