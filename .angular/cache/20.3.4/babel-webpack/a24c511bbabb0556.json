{"ast":null,"code":"import { __decorate } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, Inject, Input, HostBinding, NgModule } from '@angular/core';\nimport { tuiCreateToken, tuiProvideOptions, tuiIsString, tuiPure } from '@taiga-ui/cdk';\nimport * as i1 from '@taiga-ui/core';\nimport { tuiSizeBigger, TuiSvgModule } from '@taiga-ui/core';\nimport { tuiStringHashToHsl } from '@taiga-ui/kit/utils/format';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i3 from '@taiga-ui/kit/directives';\nimport { TuiLazyLoadingModule } from '@taiga-ui/kit/directives';\n\n/** Default values for the avatar options. */\nfunction TuiAvatarComponent_img_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 3);\n    i0.ɵɵlistener(\"error\", function TuiAvatarComponent_img_0_Template_img_error_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onError());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.avatarUrl || \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵattribute(\"alt\", ctx_r1.text);\n  }\n}\nfunction TuiAvatarComponent_tui_svg_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-svg\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.fallback);\n  }\n}\nfunction TuiAvatarComponent_tui_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-svg\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.stringAvatar);\n  }\n}\nconst TUI_AVATAR_DEFAULT_OPTIONS = {\n  size: 'm',\n  autoColor: false,\n  rounded: false\n};\n/**\n * Default parameters for avatar component\n */\nconst TUI_AVATAR_OPTIONS = tuiCreateToken(TUI_AVATAR_DEFAULT_OPTIONS);\nfunction tuiAvatarOptionsProvider(options) {\n  return tuiProvideOptions(TUI_AVATAR_OPTIONS, options, TUI_AVATAR_DEFAULT_OPTIONS);\n}\nlet TuiAvatarComponent = /*#__PURE__*/(() => {\n  class TuiAvatarComponent {\n    constructor(options) {\n      this.options = options;\n      this.size = this.options.size;\n      this.text = '';\n      this.fallback = null;\n      this.autoColor = this.options.autoColor;\n      this.rounded = this.options.rounded;\n      this.avatarUrl = null;\n      this.isUrlValid = false;\n    }\n    set avatarUrlSetter(avatarUrl) {\n      this.avatarUrl = avatarUrl;\n      this.isUrlValid = !!avatarUrl && !this.iconAvatar;\n    }\n    get bgColor() {\n      return this.autoColor ? tuiStringHashToHsl(this.text) : '';\n    }\n    get hasAvatar() {\n      return this.avatarUrl !== null && this.isUrlValid;\n    }\n    get iconAvatar() {\n      var _a;\n      return tuiIsString(this.avatarUrl) && !!((_a = this.avatarUrl) === null || _a === void 0 ? void 0 : _a.startsWith('tuiIcon'));\n    }\n    get useFallback() {\n      return !!this.fallback && !!this.avatarUrl && !this.isUrlValid && !this.text.length;\n    }\n    get computedText() {\n      return this.hasAvatar || this.iconAvatar || this.text === '' ? '' : this.getSlicedText(this.text, this.size);\n    }\n    get stringAvatar() {\n      return this.iconAvatar ? String(this.avatarUrl) : '';\n    }\n    onError() {\n      this.isUrlValid = false;\n    }\n    getSlicedText(text, size) {\n      const words = text.split(' ');\n      return words.length > 1 && tuiSizeBigger(size) ? words[0].slice(0, 1) + words[1].slice(0, 1) : words[0].slice(0, 1);\n    }\n  }\n  TuiAvatarComponent.ɵfac = function TuiAvatarComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiAvatarComponent)(i0.ɵɵdirectiveInject(TUI_AVATAR_OPTIONS));\n  };\n  TuiAvatarComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiAvatarComponent,\n    selectors: [[\"tui-avatar\"]],\n    hostVars: 7,\n    hostBindings: function TuiAvatarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵattribute(\"data-size\", ctx.size);\n        i0.ɵɵstyleProp(\"background\", ctx.bgColor);\n        i0.ɵɵclassProp(\"_rounded\", ctx.rounded)(\"_has-avatar\", ctx.hasAvatar);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      avatarUrlSetter: [0, \"avatarUrl\", \"avatarUrlSetter\"],\n      text: \"text\",\n      fallback: \"fallback\",\n      autoColor: \"autoColor\",\n      rounded: \"rounded\"\n    },\n    standalone: false,\n    decls: 5,\n    vars: 4,\n    consts: [[\"loading\", \"lazy\", \"class\", \"t-image\", 3, \"src\", \"error\", 4, \"ngIf\"], [\"class\", \"t-icon\", 3, \"src\", 4, \"ngIf\"], [1, \"t-text\"], [\"loading\", \"lazy\", 1, \"t-image\", 3, \"error\", \"src\"], [1, \"t-icon\", 3, \"src\"]],\n    template: function TuiAvatarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TuiAvatarComponent_img_0_Template, 1, 2, \"img\", 0)(1, TuiAvatarComponent_tui_svg_1_Template, 1, 1, \"tui-svg\", 1)(2, TuiAvatarComponent_tui_svg_2_Template, 1, 1, \"tui-svg\", 1);\n        i0.ɵɵelementStart(3, \"span\", 2);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isUrlValid);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.useFallback);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.stringAvatar);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.computedText);\n      }\n    },\n    dependencies: [i1.TuiSvgComponent, i2.NgIf, i3.TuiLazyLoadingDirective],\n    styles: [\"[_nghost-%COMP%]{position:relative;display:flex;flex-shrink:0;border-radius:var(--tui-radius-m);color:var(--tui-secondary-active);text-align:center;text-transform:uppercase;justify-content:center;align-items:center;background:var(--tui-avatar-background, currentColor);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden}[data-size=xs][_nghost-%COMP%]{font:var(--tui-font-text-s);width:1.5rem;height:1.5rem}[data-size=s][_nghost-%COMP%]{font:var(--tui-font-text-m);width:2rem;height:2rem}[data-size=m][_nghost-%COMP%]{font:var(--tui-font-text-l);width:3rem;height:3rem}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-heading-5);width:4rem;height:4rem;border-radius:var(--tui-radius-xl)}[data-size=xl][_nghost-%COMP%]{font:var(--tui-font-heading-3);width:6rem;height:6rem;border-radius:var(--tui-radius-xl)}[data-size=xxl][_nghost-%COMP%]{font:var(--tui-font-heading-1);width:9rem;height:9rem;border-radius:var(--tui-radius-l)}[new][data-size=xxs][_nghost-%COMP%]{width:1.5rem;height:1.5rem;border-radius:var(--tui-radius-s)}[new][data-size=xxs][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(.58)}[new][data-size=xs][_nghost-%COMP%]{width:2rem;height:2rem;border-radius:var(--tui-radius-s)}[new][data-size=xs][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(.83)}[new][data-size=s][_nghost-%COMP%]{width:2.5rem;height:2.5rem;border-radius:calc(1.5 * var(--tui-radius-s))}[new][data-size=s][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(1)}[new][data-size=m][_nghost-%COMP%]{width:3rem;height:3rem;border-radius:calc(2 * var(--tui-radius-s))}[new][data-size=m][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(1.17)}[new][data-size=l][_nghost-%COMP%]{width:4rem;height:4rem;border-radius:calc(2 * var(--tui-radius-s))}[new][data-size=l][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(1.67)}[new][data-size=xl][_nghost-%COMP%]{width:6rem;height:6rem;border-radius:calc(3 * var(--tui-radius-s))}[new][data-size=xl][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(2.33)}[new][data-size=xxl][_nghost-%COMP%]{width:8rem;height:8rem;border-radius:calc(4 * var(--tui-radius-s))}[new][data-size=xxl][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(3.33)}._has-avatar[_nghost-%COMP%]{background-color:transparent}._rounded[_nghost-%COMP%]{border-radius:100%!important}  .tui-avatar-stack{display:flex;width:-webkit-min-content;width:min-content}.tui-avatar-stack[data-size=xs][_nghost-%COMP%], .tui-avatar-stack   [data-size=xs][_nghost-%COMP%]{margin-right:-.625rem;box-shadow:0 0 0 1px var(--tui-avatar-border, var(--tui-base-01))}.tui-avatar-stack[data-size=s][_nghost-%COMP%], .tui-avatar-stack   [data-size=s][_nghost-%COMP%]{margin-right:-.875rem;box-shadow:0 0 0 1px var(--tui-avatar-border, var(--tui-base-01))}.tui-avatar-stack[data-size=m][_nghost-%COMP%], .tui-avatar-stack   [data-size=m][_nghost-%COMP%]{margin-right:-1.25rem;box-shadow:0 0 0 2px var(--tui-avatar-border, var(--tui-base-01))}.tui-avatar-stack[data-size=l][_nghost-%COMP%], .tui-avatar-stack   [data-size=l][_nghost-%COMP%]{margin-right:-1.625rem;box-shadow:0 0 0 2px var(--tui-avatar-border, var(--tui-base-01))}.tui-avatar-stack[data-size=xl][_nghost-%COMP%], .tui-avatar-stack   [data-size=xl][_nghost-%COMP%]{margin-right:-2.25rem;box-shadow:0 0 0 3px var(--tui-avatar-border, var(--tui-base-01))}.tui-avatar-stack[data-size=xxl][_nghost-%COMP%], .tui-avatar-stack   [data-size=xxl][_nghost-%COMP%]{margin-right:-3.375rem;box-shadow:0 0 0 3px var(--tui-avatar-border, var(--tui-base-01))}.t-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.t-text[_ngcontent-%COMP%]{color:var(--tui-avatar-color, var(--tui-text-01))}.t-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;color:var(--tui-avatar-color, var(--tui-text-01))}[data-size=xs][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(.5)}[data-size=m][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(1.6)}[data-size=l][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(2)}[data-size=xl][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:scale(3.2)}\"],\n    changeDetection: 0\n  });\n  __decorate([tuiPure], TuiAvatarComponent.prototype, \"getSlicedText\", null);\n  return TuiAvatarComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiAvatarModule = /*#__PURE__*/(() => {\n  class TuiAvatarModule {}\n  TuiAvatarModule.ɵfac = function TuiAvatarModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiAvatarModule)();\n  };\n  TuiAvatarModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiAvatarModule\n  });\n  TuiAvatarModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiLazyLoadingModule, TuiSvgModule]]\n  });\n  return TuiAvatarModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_AVATAR_DEFAULT_OPTIONS, TUI_AVATAR_OPTIONS, TuiAvatarComponent, TuiAvatarModule, tuiAvatarOptionsProvider };\n//# sourceMappingURL=taiga-ui-kit-components-avatar.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}