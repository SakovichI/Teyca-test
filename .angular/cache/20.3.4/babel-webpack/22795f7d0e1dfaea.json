{"ast":null,"code":"import { SkipSelf, ElementRef, Optional } from '@angular/core';\nimport { TUI_IS_MOBILE_RES, TUI_MODE } from '@taiga-ui/core/tokens';\nimport { TuiModeDirective } from '@taiga-ui/core/directives/mode';\nimport { of } from 'rxjs';\nimport { startWith, map, takeUntil } from 'rxjs/operators';\nimport { tuiWatch } from '@taiga-ui/cdk';\n\n/**\n * @deprecated: drop in v4.0\n */\nconst TUI_IS_MOBILE_RES_PROVIDER = {\n  provide: TUI_IS_MOBILE_RES,\n  deps: [[new SkipSelf(), TUI_IS_MOBILE_RES], ElementRef],\n  useFactory: (mobile$, {\n    nativeElement\n  }) => {\n    nativeElement['$.class._mobile'] = mobile$;\n    return mobile$;\n  }\n};\nconst MODE_PROVIDER = {\n  provide: TUI_MODE,\n  deps: [[new Optional(), TuiModeDirective], ElementRef],\n  useFactory: (mode, {\n    nativeElement\n  }) => {\n    const mode$ = mode ? mode.change$.pipe(startWith(null), map(() => mode.mode)) : of(null);\n    nativeElement['$.data-mode.attr'] = mode$;\n    return mode$;\n  }\n};\nfunction tuiWatchedControllerFactory(controller, cdr, destroy$) {\n  controller.change$.pipe(tuiWatch(cdr), takeUntil(destroy$)).subscribe();\n  return controller;\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MODE_PROVIDER, TUI_IS_MOBILE_RES_PROVIDER, tuiWatchedControllerFactory };\n//# sourceMappingURL=taiga-ui-core-providers.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}