{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Pipe, Inject, NgModule } from '@angular/core';\nimport * as i1 from '@taiga-ui/cdk';\nimport { DAYS_IN_WEEK, tuiAssert, tuiInRange, TuiDay } from '@taiga-ui/cdk';\nimport { TUI_FIRST_DAY_OF_WEEK } from '@taiga-ui/core/tokens';\n\n/**\n * Computes day of week offset of the beginning of the month\n */\nconst getMonthStartDaysOffset = (month, firstDayOfWeek) => {\n  const startMonthOffsetFromSunday = new Date(month.year, month.month, 1).getDay();\n  return startMonthOffsetFromSunday >= firstDayOfWeek ? startMonthOffsetFromSunday - firstDayOfWeek : DAYS_IN_WEEK - (firstDayOfWeek - startMonthOffsetFromSunday);\n};\n/**\n * Calculated day on a calendar grid\n * @return resulting day on these coordinates (could exceed passed month)\n */\nconst getDayFromMonthRowCol = ({\n  month,\n  rowIndex,\n  colIndex,\n  firstDayOfWeek\n}) => {\n  ngDevMode && tuiAssert.assert(Number.isInteger(rowIndex));\n  ngDevMode && tuiAssert.assert(tuiInRange(rowIndex, 0, 6));\n  ngDevMode && tuiAssert.assert(Number.isInteger(colIndex));\n  ngDevMode && tuiAssert.assert(tuiInRange(colIndex, 0, DAYS_IN_WEEK));\n  let day = rowIndex * DAYS_IN_WEEK + colIndex - getMonthStartDaysOffset(month, firstDayOfWeek) + 1;\n  if (day > month.daysCount) {\n    day -= month.daysCount;\n    month = month.append({\n      month: 1\n    });\n  }\n  if (day <= 0) {\n    month = month.append({\n      month: -1\n    });\n    day = month.daysCount + day;\n  }\n  return new TuiDay(month.year, month.month, day);\n};\nconst CALENDAR_ROWS_COUNT = 6;\nlet TuiCalendarSheetPipe = /*#__PURE__*/(() => {\n  class TuiCalendarSheetPipe {\n    constructor(firstDayOfWeek) {\n      this.firstDayOfWeek = firstDayOfWeek;\n      this.currentMonth = null;\n      this.currentSheet = [];\n    }\n    transform(month, showAdjacentDays = false) {\n      var _a;\n      if ((_a = this.currentMonth) === null || _a === void 0 ? void 0 : _a.monthSame(month)) {\n        return this.currentSheet;\n      }\n      const sheet = [];\n      for (let rowIndex = 0; rowIndex < CALENDAR_ROWS_COUNT; rowIndex++) {\n        const row = [];\n        for (let colIndex = 0; colIndex < DAYS_IN_WEEK; colIndex++) {\n          const day = getDayFromMonthRowCol({\n            month,\n            rowIndex,\n            colIndex,\n            firstDayOfWeek: this.firstDayOfWeek\n          });\n          const isPrevMonthDay = (day, relativeToMonth = month) => day.year < relativeToMonth.year || day.month < relativeToMonth.month;\n          const isNextMonthDay = (day, relativeToMonth = month) => day.year > relativeToMonth.year || day.month > relativeToMonth.month;\n          if (isPrevMonthDay(day) && !showAdjacentDays) {\n            continue;\n          }\n          if (isNextMonthDay(day) && !showAdjacentDays) {\n            break;\n          }\n          row.push(day);\n        }\n        sheet.push(row);\n      }\n      this.currentSheet = sheet.filter(row => row.length);\n      this.currentMonth = month;\n      return this.currentSheet;\n    }\n  }\n  TuiCalendarSheetPipe.ɵfac = function TuiCalendarSheetPipe_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiCalendarSheetPipe)(i0.ɵɵdirectiveInject(TUI_FIRST_DAY_OF_WEEK, 16));\n  };\n  TuiCalendarSheetPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n    name: \"tuiCalendarSheet\",\n    type: TuiCalendarSheetPipe,\n    pure: true,\n    standalone: false\n  });\n  return TuiCalendarSheetPipe;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiCalendarSheetPipeModule = /*#__PURE__*/(() => {\n  class TuiCalendarSheetPipeModule {}\n  TuiCalendarSheetPipeModule.ɵfac = function TuiCalendarSheetPipeModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiCalendarSheetPipeModule)();\n  };\n  TuiCalendarSheetPipeModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiCalendarSheetPipeModule\n  });\n  TuiCalendarSheetPipeModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiCalendarSheetPipeModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiCalendarSheetPipe, TuiCalendarSheetPipeModule };\n//# sourceMappingURL=taiga-ui-core-pipes-calendar-sheet.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}