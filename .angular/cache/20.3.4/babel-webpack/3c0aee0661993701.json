{"ast":null,"code":"import { __decorate } from 'tslib';\nimport { tuiIsPresent, tuiPure, TUI_DEFAULT_STRINGIFY, TUI_DEFAULT_MATCHER, TUI_FOCUSABLE_ITEM_ACCESSOR } from '@taiga-ui/cdk';\nimport { tuiIsFlat } from '@taiga-ui/kit/utils';\nimport * as i0 from '@angular/core';\nimport { Pipe, Inject, Optional, NgModule } from '@angular/core';\nimport { TUI_DATA_LIST_HOST } from '@taiga-ui/core';\nimport { TuiMultiSelectDirective } from '@taiga-ui/kit/components/multi-select';\nlet AbstractTuiFilterByInput = /*#__PURE__*/(() => {\n  class AbstractTuiFilterByInput {\n    get query() {\n      return this.accessor.nativeFocusableElement ? this.accessor.nativeFocusableElement.value || '' : '';\n    }\n    filter(items, matcher, stringify, query) {\n      if (!items) {\n        return null;\n      }\n      return tuiIsFlat(items) ? this.filterFlat(items, matcher, stringify, query) : this.filter2d(items, matcher, stringify, query);\n    }\n    filterFlat(items, matcher, stringify, query) {\n      const match = this.getMatch(items, stringify, query);\n      return tuiIsPresent(match) && !this.multiSelect ? items : items.filter(item => matcher(item, query, stringify));\n    }\n    filter2d(items, matcher, stringify, query) {\n      const match = items.find(item => tuiIsPresent(this.getMatch(item, stringify, query)));\n      return tuiIsPresent(match) && !this.multiSelect ? items : items.map(inner => this.filterFlat(inner, matcher, stringify, query));\n    }\n    getMatch(items, stringify, query) {\n      return items.find(item => stringify(item).toLocaleLowerCase() === query.toLocaleLowerCase());\n    }\n  }\n  __decorate([tuiPure], AbstractTuiFilterByInput.prototype, \"filter\", null);\n  return AbstractTuiFilterByInput;\n})();\nlet TuiFilterByInputPipe = /*#__PURE__*/(() => {\n  class TuiFilterByInputPipe extends AbstractTuiFilterByInput {\n    constructor(accessor, host, multiSelect) {\n      super();\n      this.accessor = accessor;\n      this.host = host;\n      this.multiSelect = multiSelect;\n    }\n    transform(items, matcher = TUI_DEFAULT_MATCHER) {\n      return this.filter(items, matcher, this.host.stringify || TUI_DEFAULT_STRINGIFY, this.query);\n    }\n  }\n  TuiFilterByInputPipe.ɵfac = function TuiFilterByInputPipe_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiFilterByInputPipe)(i0.ɵɵdirectiveInject(TUI_FOCUSABLE_ITEM_ACCESSOR, 16), i0.ɵɵdirectiveInject(TUI_DATA_LIST_HOST, 16), i0.ɵɵdirectiveInject(TuiMultiSelectDirective, 24));\n  };\n  TuiFilterByInputPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n    name: \"tuiFilterByInput\",\n    type: TuiFilterByInputPipe,\n    pure: false,\n    standalone: false\n  });\n  return TuiFilterByInputPipe;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * @deprecated Use {@link TuiFilterByInputPipe} instead\n */\nlet TuiFilterByInputWithPipe = /*#__PURE__*/(() => {\n  class TuiFilterByInputWithPipe extends AbstractTuiFilterByInput {\n    constructor(accessor, multiSelect) {\n      super();\n      this.accessor = accessor;\n      this.multiSelect = multiSelect;\n    }\n    transform(items, stringify) {\n      return this.filter(items, TUI_DEFAULT_MATCHER, stringify, this.query);\n    }\n  }\n  TuiFilterByInputWithPipe.ɵfac = function TuiFilterByInputWithPipe_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiFilterByInputWithPipe)(i0.ɵɵdirectiveInject(TUI_FOCUSABLE_ITEM_ACCESSOR, 16), i0.ɵɵdirectiveInject(TuiMultiSelectDirective, 24));\n  };\n  TuiFilterByInputWithPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n    name: \"tuiFilterByInputWith\",\n    type: TuiFilterByInputWithPipe,\n    pure: false,\n    standalone: false\n  });\n  return TuiFilterByInputWithPipe;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiFilterByInputPipeModule = /*#__PURE__*/(() => {\n  class TuiFilterByInputPipeModule {}\n  TuiFilterByInputPipeModule.ɵfac = function TuiFilterByInputPipeModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiFilterByInputPipeModule)();\n  };\n  TuiFilterByInputPipeModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiFilterByInputPipeModule\n  });\n  TuiFilterByInputPipeModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiFilterByInputPipeModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AbstractTuiFilterByInput, TuiFilterByInputPipe, TuiFilterByInputPipeModule, TuiFilterByInputWithPipe };\n//# sourceMappingURL=taiga-ui-kit-pipes-filter-by-input.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}