{"ast":null,"code":"import { __decorate } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { ChangeDetectorRef, Component, ChangeDetectionStrategy, Optional, Self, Inject, ViewChild, Input, HostBinding, Directive, NgModule } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NgControl } from '@angular/forms';\nimport { maskitoNumberOptionsGenerator } from '@maskito/kit';\nimport { AbstractTuiNullableControl, ALWAYS_FALSE_HANDLER, tuiAsFocusableItemAccessor, tuiAsControl, tuiPure } from '@taiga-ui/cdk';\nimport * as i1 from '@taiga-ui/core';\nimport { TUI_TEXTFIELD_SIZE, TuiPrimitiveTextfieldComponent, AbstractTuiTextfieldHost, tuiAsTextfieldHost, TuiHostedDropdownModule, TuiPrimitiveTextfieldModule, TuiPrimitiveYearPickerModule, TuiScrollbarModule, TuiTextfieldControllerModule, TuiTextfieldComponent } from '@taiga-ui/core';\nimport { TUI_INPUT_DATE_OPTIONS } from '@taiga-ui/kit/tokens';\nimport * as i2 from '@maskito/angular';\nimport { MaskitoModule } from '@maskito/angular';\nimport * as i3 from '@taiga-ui/kit/pipes';\nimport { TuiToYearPipeModule } from '@taiga-ui/kit/pipes';\nconst _c0 = [\"*\", [[\"input\"]]];\nconst _c1 = [\"*\", \"input\"];\nfunction TuiInputYearComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"tui-scrollbar\", 4)(2, \"tui-primitive-year-picker\", 5);\n    i0.ɵɵpipe(3, \"tuiToYear\");\n    i0.ɵɵpipe(4, \"tuiToYear\");\n    i0.ɵɵpipe(5, \"tuiToYear\");\n    i0.ɵɵpipe(6, \"tuiToYear\");\n    i0.ɵɵlistener(\"mousedown.prevent.silent\", function TuiInputYearComponent_ng_template_4_Template_tui_primitive_year_picker_mousedown_prevent_silent_2_listener() {\n      i0.ɵɵrestoreView(_r2);\n      return i0.ɵɵresetView(0);\n    })(\"yearClick\", function TuiInputYearComponent_ng_template_4_Template_tui_primitive_year_picker_yearClick_2_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onYearClick($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabledItemHandler\", ctx_r2.disabledItemHandler)(\"initialItem\", i0.ɵɵpipeBind1(3, 5, ctx_r2.value || ctx_r2.initialItem))(\"max\", i0.ɵɵpipeBind1(4, 7, ctx_r2.computedMax))(\"min\", i0.ɵɵpipeBind1(5, 9, ctx_r2.computedMin))(\"value\", ctx_r2.value === null ? null : i0.ɵɵpipeBind1(6, 11, ctx_r2.value));\n  }\n}\nconst UP_TO_4_DIGITS_REG = /^\\d{0,4}$/;\nlet TuiInputYearComponent = /*#__PURE__*/(() => {\n  class TuiInputYearComponent extends AbstractTuiNullableControl {\n    constructor(control, cdr, options, textfieldSize) {\n      super(control, cdr);\n      this.options = options;\n      this.textfieldSize = textfieldSize;\n      this.min = this.options.min.year;\n      this.max = this.options.max.year;\n      this.disabledItemHandler = ALWAYS_FALSE_HANDLER;\n      this.open = false;\n      this.nativeValue = '';\n      this.initialItem = new Date().getFullYear();\n    }\n    get size() {\n      return this.textfieldSize.size;\n    }\n    get computedMin() {\n      var _a;\n      return (_a = this.min) !== null && _a !== void 0 ? _a : this.options.min.year;\n    }\n    get computedMax() {\n      var _a;\n      return (_a = this.max) !== null && _a !== void 0 ? _a : this.options.max.year;\n    }\n    get nativeFocusableElement() {\n      var _a;\n      return ((_a = this.textfield) === null || _a === void 0 ? void 0 : _a.nativeFocusableElement) || null;\n    }\n    get focused() {\n      var _a;\n      return !!((_a = this.textfield) === null || _a === void 0 ? void 0 : _a.focused);\n    }\n    get calendarIcon() {\n      return this.options.icon;\n    }\n    getMaskOptions(min, max) {\n      return Object.assign(Object.assign({}, maskitoNumberOptionsGenerator({\n        min,\n        max,\n        thousandSeparator: ''\n      })), {\n        mask: UP_TO_4_DIGITS_REG\n      });\n    }\n    onValueChange(value) {\n      this.value = value ? Number(value) : null;\n    }\n    onYearClick({\n      year\n    }) {\n      this.value = year;\n      this.updateNativeValue(year);\n      this.onOpenChange(false);\n    }\n    onFocused(focused) {\n      this.updateFocused(focused);\n    }\n    onOpenChange(open) {\n      this.open = open;\n    }\n    toggle() {\n      this.open = !this.open;\n    }\n    writeValue(value) {\n      super.writeValue(value);\n      this.updateNativeValue(value);\n    }\n    updateNativeValue(value) {\n      this.nativeValue = (value === null || value === void 0 ? void 0 : value.toString()) || '';\n    }\n  }\n  TuiInputYearComponent.ɵfac = function TuiInputYearComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiInputYearComponent)(i0.ɵɵdirectiveInject(NgControl, 10), i0.ɵɵdirectiveInject(ChangeDetectorRef), i0.ɵɵdirectiveInject(TUI_INPUT_DATE_OPTIONS), i0.ɵɵdirectiveInject(TUI_TEXTFIELD_SIZE));\n  };\n  TuiInputYearComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiInputYearComponent,\n    selectors: [[\"tui-input-year\"]],\n    viewQuery: function TuiInputYearComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(TuiPrimitiveTextfieldComponent, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.textfield = _t.first);\n      }\n    },\n    hostVars: 1,\n    hostBindings: function TuiInputYearComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵattribute(\"data-size\", ctx.size);\n      }\n    },\n    inputs: {\n      min: \"min\",\n      max: \"max\",\n      disabledItemHandler: \"disabledItemHandler\"\n    },\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([tuiAsFocusableItemAccessor(TuiInputYearComponent), tuiAsControl(TuiInputYearComponent)]), i0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c1,\n    decls: 6,\n    vars: 12,\n    consts: [[\"dropdown\", \"\"], [1, \"t-hosted\", 3, \"click\", \"openChange\", \"canOpen\", \"content\", \"open\"], [1, \"t-textfield\", 3, \"valueChange\", \"focusedChange\", \"disabled\", \"invalid\", \"maskito\", \"nativeId\", \"pseudoFocus\", \"pseudoHover\", \"readOnly\", \"tuiTextfieldIcon\", \"value\"], [1, \"t-container\"], [1, \"t-scrollbar\"], [3, \"mousedown.prevent.silent\", \"yearClick\", \"disabledItemHandler\", \"initialItem\", \"max\", \"min\", \"value\"]],\n    template: function TuiInputYearComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵprojectionDef(_c0);\n        i0.ɵɵelementStart(0, \"tui-hosted-dropdown\", 1);\n        i0.ɵɵlistener(\"click\", function TuiInputYearComponent_Template_tui_hosted_dropdown_click_0_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.toggle());\n        })(\"openChange\", function TuiInputYearComponent_Template_tui_hosted_dropdown_openChange_0_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.onOpenChange($event));\n        });\n        i0.ɵɵelementStart(1, \"tui-primitive-textfield\", 2);\n        i0.ɵɵtwoWayListener(\"valueChange\", function TuiInputYearComponent_Template_tui_primitive_textfield_valueChange_1_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.nativeValue, $event) || (ctx.nativeValue = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵlistener(\"focusedChange\", function TuiInputYearComponent_Template_tui_primitive_textfield_focusedChange_1_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.onFocused($event));\n        })(\"valueChange\", function TuiInputYearComponent_Template_tui_primitive_textfield_valueChange_1_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.onValueChange($event));\n        });\n        i0.ɵɵprojection(2);\n        i0.ɵɵprojection(3, 1, [\"ngProjectAs\", \"input\", 5, [\"input\"]]);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, TuiInputYearComponent_ng_template_4_Template, 7, 13, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const dropdown_r4 = i0.ɵɵreference(5);\n        i0.ɵɵproperty(\"canOpen\", ctx.interactive)(\"content\", dropdown_r4)(\"open\", ctx.open && ctx.interactive);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"disabled\", ctx.computedDisabled)(\"invalid\", ctx.computedInvalid)(\"maskito\", ctx.getMaskOptions(ctx.computedMin, ctx.computedMax))(\"nativeId\", ctx.nativeId)(\"pseudoFocus\", ctx.pseudoFocus)(\"pseudoHover\", ctx.pseudoHover)(\"readOnly\", ctx.readOnly)(\"tuiTextfieldIcon\", ctx.calendarIcon);\n        i0.ɵɵtwoWayProperty(\"value\", ctx.nativeValue);\n      }\n    },\n    dependencies: [i1.TuiHostedDropdownComponent, i1.TuiPrimitiveTextfieldComponent, i1.TuiScrollbarComponent, i1.TuiPrimitiveYearPickerComponent, i1.TuiPrimitiveTextfieldDirective, i2.MaskitoDirective, i1.TuiTextfieldIconDirective, i3.TuiToYearPipe],\n    styles: [\"[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-container[_ngcontent-%COMP%]{width:15.75rem;padding:1rem 1.125rem}.t-scrollbar[_ngcontent-%COMP%]{max-height:18.25rem;width:16.875rem}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}\"],\n    changeDetection: 0\n  });\n  __decorate([tuiPure], TuiInputYearComponent.prototype, \"getMaskOptions\", null);\n  return TuiInputYearComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiInputYearDirective = /*#__PURE__*/(() => {\n  class TuiInputYearDirective extends AbstractTuiTextfieldHost {\n    onValueChange(value) {\n      this.host.onValueChange(value);\n      this.host.nativeValue = value;\n    }\n    get value() {\n      return this.host.nativeValue;\n    }\n    process(input) {\n      input.inputMode = 'numeric';\n    }\n  }\n  TuiInputYearDirective.ɵfac = /* @__PURE__ */(() => {\n    let ɵTuiInputYearDirective_BaseFactory;\n    return function TuiInputYearDirective_Factory(__ngFactoryType__) {\n      return (ɵTuiInputYearDirective_BaseFactory || (ɵTuiInputYearDirective_BaseFactory = i0.ɵɵgetInheritedFactory(TuiInputYearDirective)))(__ngFactoryType__ || TuiInputYearDirective);\n    };\n  })();\n  TuiInputYearDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiInputYearDirective,\n    selectors: [[\"tui-input-year\"]],\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([tuiAsTextfieldHost(TuiInputYearDirective)]), i0.ɵɵInheritDefinitionFeature]\n  });\n  return TuiInputYearDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiInputYearModule = /*#__PURE__*/(() => {\n  class TuiInputYearModule {}\n  TuiInputYearModule.ɵfac = function TuiInputYearModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiInputYearModule)();\n  };\n  TuiInputYearModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiInputYearModule\n  });\n  TuiInputYearModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[MaskitoModule, TuiHostedDropdownModule, TuiPrimitiveTextfieldModule, TuiPrimitiveYearPickerModule, TuiScrollbarModule, TuiTextfieldControllerModule, TuiToYearPipeModule]]\n  });\n  return TuiInputYearModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiInputYearComponent, TuiInputYearDirective, TuiInputYearModule };\n//# sourceMappingURL=taiga-ui-kit-components-input-year.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}