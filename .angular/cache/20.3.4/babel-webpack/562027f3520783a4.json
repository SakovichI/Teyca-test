{"ast":null,"code":"import { __decorate } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { forwardRef, ElementRef, Component, ChangeDetectionStrategy, Inject, Optional, Self, Input, HostBinding, HostListener, ViewEncapsulation, ContentChildren, Directive, NgModule } from '@angular/core';\nimport { tuiIsNativeFocused, TUI_IS_MOBILE, EMPTY_QUERY, tuiQueryListChanges, tuiMoveFocus, tuiIsNativeFocusedIn, tuiSetNativeMouseFocused, tuiIsPresent, tuiIsElement, tuiPure } from '@taiga-ui/cdk';\nimport * as i3 from '@taiga-ui/core/directives';\nimport { TUI_TEXTFIELD_WATCHED_CONTROLLER, TEXTFIELD_CONTROLLER_PROVIDER } from '@taiga-ui/core/directives';\nimport { TUI_OPTION_CONTENT, TUI_DATA_LIST_HOST, TUI_COMMON_ICONS, TUI_NOTHING_FOUND_MESSAGE, tuiAsDataListAccessor } from '@taiga-ui/core/tokens';\nimport { map } from 'rxjs/operators';\nimport * as i5 from '@taiga-ui/core/directives/dropdown';\nimport { TuiDropdownDirective } from '@taiga-ui/core/directives/dropdown';\nimport { shouldCall } from '@tinkoff/ng-event-plugins';\nimport * as i1 from '@taiga-ui/core/components/svg';\nimport { TuiSvgModule } from '@taiga-ui/core/components/svg';\nimport * as i2 from '@tinkoff/ng-polymorpheus';\nimport { PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport * as i1$1 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i4 from 'rxjs';\nconst _c0 = [\"tuiOption\", \"\"];\nconst _c1 = [\"*\"];\nconst _c2 = a0 => ({\n  $implicit: a0\n});\nfunction TuiOptionComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const text_r1 = ctx.polymorpheusOutlet;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", text_r1, \"\\n\");\n  }\n}\nfunction TuiOptionComponent_ng_template_1_tui_svg_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-svg\", 3);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.icons.more);\n  }\n}\nfunction TuiOptionComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵprojection(0);\n    i0.ɵɵtemplate(1, TuiOptionComponent_ng_template_1_tui_svg_1_Template, 1, 1, \"tui-svg\", 2);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.dropdown);\n  }\n}\nfunction TuiDataListComponent_div_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const text_r1 = ctx.polymorpheusOutlet;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", text_r1, \" \");\n  }\n}\nfunction TuiDataListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, TuiDataListComponent_div_2_ng_container_1_Template, 2, 1, \"ng-container\", 3);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"polymorpheusOutlet\", ctx_r1.emptyContent || i0.ɵɵpipeBind1(2, 1, ctx_r1.defaultEmptyContent$));\n  }\n}\nfunction shouldFocus({\n  currentTarget\n}) {\n  return !this.isMobile && !tuiIsNativeFocused(currentTarget) && !!currentTarget.closest('[tuiDataListDropdownManager]');\n}\n// TODO: Consider all use cases for aria roles\nlet TuiOptionComponent = /*#__PURE__*/(() => {\n  class TuiOptionComponent {\n    constructor(isMobile, content, dataList, el, host, dropdown, icons) {\n      this.isMobile = isMobile;\n      this.content = content;\n      this.dataList = dataList;\n      this.el = el;\n      this.host = host;\n      this.dropdown = dropdown;\n      this.icons = icons;\n      /** @deprecated use size on {@link TuiDataListComponent} instead */\n      this.size = null;\n      this.role = 'option';\n      this.disabled = false;\n    }\n    get active() {\n      return !!this.dropdown && !!this.dropdown.dropdownBoxRef;\n    }\n    onClick() {\n      if (this.host && this.value !== undefined) {\n        this.host.handleOption(this.value);\n      }\n    }\n    // @bad TODO: Consider aria-activedescendant for proper accessibility implementation\n    onMouseMove({\n      currentTarget\n    }) {\n      currentTarget.focus({\n        preventScroll: true\n      });\n    }\n    // Preventing focus loss upon focused option removal\n    ngOnDestroy() {\n      var _a;\n      (_a = this.dataList) === null || _a === void 0 ? void 0 : _a.handleFocusLossIfNecessary(this.el.nativeElement);\n    }\n  }\n  TuiOptionComponent.ɵfac = function TuiOptionComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiOptionComponent)(i0.ɵɵdirectiveInject(TUI_IS_MOBILE), i0.ɵɵdirectiveInject(TUI_OPTION_CONTENT, 8), i0.ɵɵdirectiveInject(forwardRef(() => TuiDataListComponent), 8), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TUI_DATA_LIST_HOST, 8), i0.ɵɵdirectiveInject(TuiDropdownDirective, 10), i0.ɵɵdirectiveInject(TUI_COMMON_ICONS));\n  };\n  TuiOptionComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiOptionComponent,\n    selectors: [[\"button\", \"tuiOption\", \"\"], [\"a\", \"tuiOption\", \"\"]],\n    hostAttrs: [\"tabIndex\", \"-1\", \"type\", \"button\"],\n    hostVars: 5,\n    hostBindings: function TuiOptionComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function TuiOptionComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        })(\"mousemove.silent\", function TuiOptionComponent_mousemove_silent_HostBindingHandler($event) {\n          return ctx.onMouseMove($event);\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵattribute(\"disabled\", ctx.disabled || null)(\"data-size\", ctx.size)(\"role\", ctx.role);\n        i0.ɵɵclassProp(\"_with-dropdown\", ctx.active);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      role: \"role\",\n      disabled: \"disabled\",\n      value: \"value\"\n    },\n    standalone: false,\n    attrs: _c0,\n    ngContentSelectors: _c1,\n    decls: 3,\n    vars: 4,\n    consts: [[\"base\", \"\"], [4, \"polymorpheusOutlet\", \"polymorpheusOutletContext\"], [\"class\", \"t-arrow\", 3, \"src\", 4, \"ngIf\"], [1, \"t-arrow\", 3, \"src\"]],\n    template: function TuiOptionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵtemplate(0, TuiOptionComponent_ng_container_0_Template, 2, 1, \"ng-container\", 1)(1, TuiOptionComponent_ng_template_1_Template, 2, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const base_r3 = i0.ɵɵreference(2);\n        i0.ɵɵproperty(\"polymorpheusOutlet\", ctx.content || base_r3)(\"polymorpheusOutletContext\", i0.ɵɵpureFunction1(2, _c2, base_r3));\n      }\n    },\n    dependencies: [i1.TuiSvgComponent, i2.PolymorpheusOutletDirective, i1$1.NgIf],\n    styles: [\"[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;justify-content:space-between;text-align:left;color:var(--tui-text-01);border-radius:var(--tui-radius-s);outline:none;cursor:pointer;background-clip:padding-box}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:default}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus, ._with-dropdown[_nghost-%COMP%]{background-color:var(--tui-clear)}[_nghost-%COMP%]   [data-list-size=\\\"s\\\"][_nghost-%COMP%], [data-list-size=\\\"s\\\"]   [_nghost-%COMP%], [_nghost-%COMP%]   [data-list-size=\\\"xs\\\"][_nghost-%COMP%], [data-list-size=\\\"xs\\\"]   [_nghost-%COMP%], [data-size=s][data-size=s][_nghost-%COMP%], [data-size=xs][data-size=xs][_nghost-%COMP%]{display:flex;align-items:center;box-sizing:border-box;margin:var(--tui-data-list-margin) 0;font:var(--tui-font-text-s);min-height:2rem;padding:.3125rem .5rem}[_nghost-%COMP%]   [data-list-size=\\\"m\\\"][_nghost-%COMP%], [data-list-size=\\\"m\\\"]   [_nghost-%COMP%], [data-size=m][data-size=m][_nghost-%COMP%]{display:flex;align-items:center;box-sizing:border-box;margin:var(--tui-data-list-margin) 0;font:var(--tui-font-text-s);min-height:2.5rem;padding:.375rem .5rem}[_nghost-%COMP%]   [data-list-size=\\\"l\\\"][_nghost-%COMP%], [data-list-size=\\\"l\\\"]   [_nghost-%COMP%], [data-size=l][data-size=l][_nghost-%COMP%]{display:flex;align-items:center;box-sizing:border-box;margin:var(--tui-data-list-margin) 0;font:var(--tui-font-text-m);min-height:2.75rem;padding:.375rem .625rem}.t-arrow[_ngcontent-%COMP%]{margin:0 -.5rem 0 .75rem}\"],\n    changeDetection: 0\n  });\n  __decorate([shouldCall(shouldFocus)], TuiOptionComponent.prototype, \"onMouseMove\", null);\n  return TuiOptionComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// TODO: Consider aria-activedescendant for proper accessibility implementation\nlet TuiDataListComponent = /*#__PURE__*/(() => {\n  class TuiDataListComponent {\n    constructor(controller, el, defaultEmptyContent$) {\n      var _a;\n      this.controller = controller;\n      this.el = el;\n      this.defaultEmptyContent$ = defaultEmptyContent$;\n      this.options = EMPTY_QUERY;\n      this.role = 'listbox';\n      this.size = ((_a = this.controller) === null || _a === void 0 ? void 0 : _a.size) || 'm';\n    }\n    get empty$() {\n      return tuiQueryListChanges(this.options).pipe(map(({\n        length\n      }) => !length));\n    }\n    onFocusIn(relatedTarget, currentTarget) {\n      if (!currentTarget.contains(relatedTarget) && !this.origin) {\n        this.origin = relatedTarget;\n      }\n    }\n    noop() {}\n    onKeyDownArrow(current, step) {\n      const {\n        elements\n      } = this;\n      tuiMoveFocus(elements.indexOf(current), elements, step);\n    }\n    // TODO: Consider aria-activedescendant for proper accessibility implementation\n    handleFocusLossIfNecessary(element = this.el.nativeElement) {\n      if (this.origin && tuiIsNativeFocusedIn(element)) {\n        tuiSetNativeMouseFocused(this.origin, true, true);\n      }\n    }\n    getOptions(includeDisabled = false) {\n      return this.options.filter(({\n        disabled\n      }) => includeDisabled || !disabled).map(({\n        value\n      }) => value).filter(tuiIsPresent);\n    }\n    onFocus({\n      target\n    }, top) {\n      if (!tuiIsElement(target)) {\n        return;\n      }\n      const {\n        elements\n      } = this;\n      tuiMoveFocus(top ? -1 : elements.length, elements, top ? 1 : -1);\n      this.handleFocusLossIfNecessary(target);\n    }\n    get elements() {\n      return Array.from(this.el.nativeElement.querySelectorAll('[tuiOption]'));\n    }\n  }\n  TuiDataListComponent.ɵfac = function TuiDataListComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiDataListComponent)(i0.ɵɵdirectiveInject(TUI_TEXTFIELD_WATCHED_CONTROLLER, 8), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TUI_NOTHING_FOUND_MESSAGE));\n  };\n  TuiDataListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiDataListComponent,\n    selectors: [[\"tui-data-list\"]],\n    contentQueries: function TuiDataListComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, TuiOptionComponent, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.options = _t);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function TuiDataListComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"focusin\", function TuiDataListComponent_focusin_HostBindingHandler($event) {\n          return ctx.onFocusIn($event.relatedTarget, $event.currentTarget);\n        })(\"mousedown.prevent\", function TuiDataListComponent_mousedown_prevent_HostBindingHandler() {\n          return ctx.noop();\n        })(\"keydown.arrowDown.prevent\", function TuiDataListComponent_keydown_arrowDown_prevent_HostBindingHandler($event) {\n          return ctx.onKeyDownArrow($event.target, 1);\n        })(\"keydown.arrowUp.prevent\", function TuiDataListComponent_keydown_arrowUp_prevent_HostBindingHandler($event) {\n          return ctx.onKeyDownArrow($event.target, -1);\n        })(\"wheel.silent.passive\", function TuiDataListComponent_wheel_silent_passive_HostBindingHandler() {\n          return ctx.handleFocusLossIfNecessary();\n        })(\"mouseleave\", function TuiDataListComponent_mouseleave_HostBindingHandler($event) {\n          return ctx.handleFocusLossIfNecessary($event.target);\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵattribute(\"role\", ctx.role)(\"data-list-size\", ctx.size);\n      }\n    },\n    inputs: {\n      role: \"role\",\n      emptyContent: \"emptyContent\",\n      size: \"size\"\n    },\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([tuiAsDataListAccessor(TuiDataListComponent), TEXTFIELD_CONTROLLER_PROVIDER])],\n    ngContentSelectors: _c1,\n    decls: 5,\n    vars: 3,\n    consts: [[\"tabindex\", \"0\", 1, \"t-trap\", 3, \"focusin\"], [\"class\", \"t-empty\", 4, \"ngIf\"], [1, \"t-empty\"], [4, \"polymorpheusOutlet\"]],\n    template: function TuiDataListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"focusin\", function TuiDataListComponent_Template_div_focusin_0_listener($event) {\n          return ctx.onFocus($event, true);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵprojection(1);\n        i0.ɵɵtemplate(2, TuiDataListComponent_div_2_Template, 3, 3, \"div\", 1);\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementStart(4, \"div\", 0);\n        i0.ɵɵlistener(\"focusin\", function TuiDataListComponent_Template_div_focusin_4_listener($event) {\n          return ctx.onFocus($event, false);\n        });\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 1, ctx.empty$));\n      }\n    },\n    dependencies: [i1$1.NgIf, i2.PolymorpheusOutletDirective, i1$1.AsyncPipe],\n    styles: [\"tui-data-list{--tui-data-list-padding: .25rem;--tui-data-list-margin: .0625rem;display:flex;font:var(--tui-font-text-m);flex-direction:column;padding:calc(var(--tui-data-list-padding) - var(--tui-data-list-margin)) var(--tui-data-list-padding);color:var(--tui-text-03)}tui-data-list:focus-within .t-trap{display:none}tui-data-list:focus-within [tuiOption]._with-dropdown:not(:focus){background-color:transparent}tui-data-list[data-list-size=s]{--tui-data-list-margin: 0rem}tui-data-list[data-list-size=s]>.t-empty{display:flex;align-items:center;box-sizing:border-box;margin:var(--tui-data-list-margin) 0;font:var(--tui-font-text-s);min-height:2rem;padding:.3125rem .5rem}tui-data-list[data-list-size=m]>.t-empty{display:flex;align-items:center;box-sizing:border-box;margin:var(--tui-data-list-margin) 0;font:var(--tui-font-text-s);min-height:2.5rem;padding:.375rem .5rem}tui-data-list[data-list-size=l]{--tui-data-list-padding: .375rem;--tui-data-list-margin: .125rem}tui-data-list[data-list-size=l]>.t-empty{display:flex;align-items:center;box-sizing:border-box;margin:var(--tui-data-list-margin) 0;font:var(--tui-font-text-m);min-height:2.75rem;padding:.375rem .625rem}tui-opt-group{position:relative;display:flex;font:var(--tui-font-text-xs);color:var(--tui-text-02);flex-direction:column;line-height:1rem}tui-data-list[data-list-size=l] tui-opt-group{font:var(--tui-font-text-s);line-height:1.25rem}tui-data-list[data-list-size=l] tui-opt-group:before{padding-left:.625rem;padding-right:.625rem}tui-data-list[data-list-size=l] tui-opt-group:after{left:.625rem;right:.625rem}tui-opt-group:empty:before,tui-opt-group:empty:after{display:none}tui-opt-group:before{content:attr(data-label);padding:var(--tui-data-list-padding) .5rem var(--tui-data-list-padding);margin:var(--tui-data-list-margin) 0;white-space:normal;word-break:break-word}tui-opt-group:after{position:absolute;left:.5rem;right:.5rem;top:var(--tui-data-list-padding);height:1px;background:var(--tui-base-03)}tui-opt-group:not(:empty)~tui-opt-group:before{padding-top:calc(.75rem + var(--tui-data-list-padding))}tui-opt-group:not(:empty)~tui-opt-group[data-label=\\\"\\\"]:before,tui-opt-group:not(:empty)~tui-opt-group:not([data-label]):before{padding:var(--tui-data-list-padding) 0}tui-opt-group:not(:empty)~tui-opt-group:after{content:\\\"\\\"}tui-opt-group[data-label=\\\"\\\"]:before,tui-opt-group:not([data-label]):before{content:\\\"\\\";padding:0;margin:0}\\n\"],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  __decorate([tuiPure], TuiDataListComponent.prototype, \"empty$\", null);\n  return TuiDataListComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiDataListDirective = /*#__PURE__*/(() => {\n  class TuiDataListDirective {}\n  TuiDataListDirective.ɵfac = function TuiDataListDirective_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiDataListDirective)();\n  };\n  TuiDataListDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiDataListDirective,\n    selectors: [[\"ng-template\", \"tuiDataList\", \"\"]],\n    standalone: false\n  });\n  return TuiDataListDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nfunction tuiAsDataList(useExisting) {\n  return {\n    provide: TuiDataListDirective,\n    useExisting\n  };\n}\nlet TuiOptGroupDirective = /*#__PURE__*/(() => {\n  class TuiOptGroupDirective {}\n  TuiOptGroupDirective.ɵfac = function TuiOptGroupDirective_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiOptGroupDirective)();\n  };\n  TuiOptGroupDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiOptGroupDirective,\n    selectors: [[\"tui-opt-group\"]],\n    hostAttrs: [\"role\", \"group\"],\n    hostVars: 1,\n    hostBindings: function TuiOptGroupDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵattribute(\"data-label\", ctx.label);\n      }\n    },\n    inputs: {\n      label: \"label\"\n    },\n    standalone: false\n  });\n  return TuiOptGroupDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiDataListModule = /*#__PURE__*/(() => {\n  class TuiDataListModule {}\n  TuiDataListModule.ɵfac = function TuiDataListModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiDataListModule)();\n  };\n  TuiDataListModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiDataListModule\n  });\n  TuiDataListModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiSvgModule, PolymorpheusModule]]\n  });\n  return TuiDataListModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiDataListComponent, TuiDataListDirective, TuiDataListModule, TuiOptGroupDirective, TuiOptionComponent, tuiAsDataList };\n//# sourceMappingURL=taiga-ui-core-components-data-list.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}