{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { ChangeDetectorRef, ElementRef, Component, ChangeDetectionStrategy, Optional, Self, Inject, ViewChild, Input, HostBinding, HostListener, NgModule } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NgControl, FormsModule } from '@angular/forms';\nimport * as i2 from '@taiga-ui/cdk';\nimport { tuiCreateToken, tuiProvideOptions, AbstractTuiControl, tuiIsNativeFocused, tuiClamp, TuiRepeatTimesModule } from '@taiga-ui/cdk';\nimport * as i1 from '@taiga-ui/experimental/components/icon';\nimport { TuiIconModule } from '@taiga-ui/experimental/components/icon';\nimport * as i3 from '@tinkoff/ng-polymorpheus';\nimport { PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport { CommonModule } from '@angular/common';\nconst _c0 = a0 => ({\n  $implicit: a0\n});\nfunction TuiRatingComponent_div_1_tui_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-icon\", 6);\n  }\n  if (rf & 2) {\n    const src_r4 = ctx.polymorpheusOutlet;\n    const index_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"--t-cut\", 100 - ctx_r2.getCut(index_r2), \"%\");\n    i0.ɵɵclassProp(\"t-icon_fraction\", ctx_r2.isFraction(index_r2));\n    i0.ɵɵproperty(\"icon\", src_r4.toString());\n  }\n}\nfunction TuiRatingComponent_div_1_tui_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-icon\", 7);\n  }\n  if (rf & 2) {\n    const src_r5 = ctx.polymorpheusOutlet;\n    const index_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"--t-cut\", ctx_r2.getCut(index_r2), \"%\");\n    i0.ɵɵproperty(\"icon\", src_r5.toString());\n  }\n}\nfunction TuiRatingComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"pointerup\", function TuiRatingComponent_div_1_Template_div_pointerup_0_listener() {\n      const index_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onClick(ctx_r2.max - index_r2));\n    });\n    i0.ɵɵtemplate(1, TuiRatingComponent_div_1_tui_icon_1_Template, 1, 5, \"tui-icon\", 4)(2, TuiRatingComponent_div_1_tui_icon_2_Template, 1, 3, \"tui-icon\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const index_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"t-item_active\", ctx_r2.isActive(index_r2));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"polymorpheusOutlet\", ctx_r2.icon)(\"polymorpheusOutletContext\", i0.ɵɵpureFunction1(6, _c0, ctx_r2.max - index_r2));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"polymorpheusOutlet\", ctx_r2.icon)(\"polymorpheusOutletContext\", i0.ɵɵpureFunction1(8, _c0, ctx_r2.max - index_r2));\n  }\n}\nconst TUI_RATING_DEFAULT_OPTIONS = {\n  icon: 'tuiIconStarLarge',\n  max: 5\n};\nconst TUI_RATING_OPTIONS = tuiCreateToken(TUI_RATING_DEFAULT_OPTIONS);\nfunction tuiRatingOptionsProvider(options) {\n  return tuiProvideOptions(TUI_RATING_OPTIONS, options, TUI_RATING_DEFAULT_OPTIONS);\n}\nlet TuiRatingComponent = /*#__PURE__*/(() => {\n  class TuiRatingComponent extends AbstractTuiControl {\n    constructor(control, cdr, options) {\n      super(control, cdr);\n      this.options = options;\n      this.icon = this.options.icon;\n      this.max = this.options.max;\n      this.active = 0;\n    }\n    get nativeFocusableElement() {\n      var _a;\n      return this.computedDisabled ? null : ((_a = this.input) === null || _a === void 0 ? void 0 : _a.nativeElement) || null;\n    }\n    get focused() {\n      return tuiIsNativeFocused(this.nativeFocusableElement);\n    }\n    onKeyDown(event) {\n      if (this.readOnly) {\n        event.preventDefault();\n      }\n    }\n    onPointer(delta) {\n      this.active = tuiClamp(this.active + delta, 0, 1);\n    }\n    onClick(value) {\n      if (this.active) {\n        this.value = value;\n      }\n    }\n    isActive(index) {\n      return Math.ceil(this.value) >= this.max - index;\n    }\n    isFraction(index) {\n      return this.value > this.max - index - 1 && this.value < this.max - index;\n    }\n    getCut(index) {\n      return this.isFraction(index) ? 100 * Math.max(this.max - index - this.value, 0) : 0;\n    }\n    getFallbackValue() {\n      return 0;\n    }\n  }\n  TuiRatingComponent.ɵfac = function TuiRatingComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiRatingComponent)(i0.ɵɵdirectiveInject(NgControl, 10), i0.ɵɵdirectiveInject(ChangeDetectorRef), i0.ɵɵdirectiveInject(TUI_RATING_OPTIONS));\n  };\n  TuiRatingComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiRatingComponent,\n    selectors: [[\"tui-rating\"]],\n    viewQuery: function TuiRatingComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(NgControl, 7, ElementRef);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function TuiRatingComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown.capture\", function TuiRatingComponent_keydown_capture_HostBindingHandler($event) {\n          return ctx.onKeyDown($event);\n        })(\"pointerdown\", function TuiRatingComponent_pointerdown_HostBindingHandler() {\n          return ctx.onPointer(1);\n        })(\"pointercancel\", function TuiRatingComponent_pointercancel_HostBindingHandler() {\n          return ctx.onPointer(-1);\n        })(\"pointerup\", function TuiRatingComponent_pointerup_HostBindingHandler() {\n          return ctx.onPointer(-1);\n        }, i0.ɵɵresolveDocument);\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"_active\", ctx.active);\n      }\n    },\n    inputs: {\n      icon: \"icon\",\n      max: \"max\"\n    },\n    standalone: false,\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 3,\n    vars: 5,\n    consts: [[1, \"t-items\"], [\"class\", \"t-item\", 3, \"t-item_active\", \"pointerup\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"min\", \"1\", \"type\", \"range\", 1, \"t-range\", 3, \"ngModelChange\", \"disabled\", \"max\", \"ngModel\"], [1, \"t-item\", 3, \"pointerup\"], [\"class\", \"t-icon t-icon_blank\", 3, \"t-icon_fraction\", \"icon\", \"--t-cut\", 4, \"polymorpheusOutlet\", \"polymorpheusOutletContext\"], [\"class\", \"t-icon\", 3, \"icon\", \"--t-cut\", 4, \"polymorpheusOutlet\", \"polymorpheusOutletContext\"], [1, \"t-icon\", \"t-icon_blank\", 3, \"icon\"], [1, \"t-icon\", 3, \"icon\"]],\n    template: function TuiRatingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, TuiRatingComponent_div_1_Template, 3, 10, \"div\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"input\", 2);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function TuiRatingComponent_Template_input_ngModelChange_2_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.value, $event) || (ctx.value = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"disabled\", ctx.computedDisabled)(\"max\", ctx.max);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.value);\n        i0.ɵɵattribute(\"aria-disabled\", ctx.readOnly);\n      }\n    },\n    dependencies: [i1.TuiIconComponent, i2.TuiRepeatTimesDirective, i3.PolymorpheusOutletDirective, i4.RangeValueAccessor, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\"[_nghost-%COMP%]{position:relative;display:block;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;font-size:1rem;color:var(--tui-support-12);cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}._readonly[_nghost-%COMP%]{pointer-events:none}._disabled[_nghost-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-range[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;box-sizing:border-box;padding:0 .75em;pointer-events:none}.t-range[_ngcontent-%COMP%]:focus-visible + .t-items[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 .125rem var(--tui-focus)}.t-items[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row-reverse}.t-items[_ngcontent-%COMP%]:hover   .t-icon[_ngcontent-%COMP%]{-webkit-clip-path:inset(0 0 0 0);clip-path:inset(0 0 0 0)}.t-items[_ngcontent-%COMP%]:hover   .t-icon_blank[_ngcontent-%COMP%]{-webkit-clip-path:inset(0 0 0 100%);clip-path:inset(0 0 0 100%)}.t-item[_ngcontent-%COMP%]{position:relative;flex:1 0 0;color:var(--tui-base-06);transition-property:color,transform;transition-duration:var(--tui-duration);transition-timing-function:ease-in-out,cubic-bezier(.35,1.5,.4,2.5)}.t-item[_ngcontent-%COMP%]:first-child{max-width:2.5em}.t-item[_ngcontent-%COMP%]:hover, .t-item[_ngcontent-%COMP%]:hover ~ .t-item[_ngcontent-%COMP%], .t-items[_ngcontent-%COMP%]:not(:hover)   .t-item_active[_ngcontent-%COMP%]{color:currentColor}.t-items[_ngcontent-%COMP%]:active   .t-item[_ngcontent-%COMP%]:hover, .t-items[_ngcontent-%COMP%]:active   .t-item[_ngcontent-%COMP%]:hover ~ .t-item[_ngcontent-%COMP%]{transform:scale(.85);transition-duration:var(--tui-duration),calc(var(--tui-duration) / 3);transition-timing-function:ease-in-out}.t-icon[_ngcontent-%COMP%]{transition-property:-webkit-clip-path;transition-property:clip-path;transition-property:clip-path,-webkit-clip-path;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;width:2.5em;height:2.5em;font-size:inherit;-webkit-clip-path:inset(0 var(--t-cut) 0 0);clip-path:inset(0 var(--t-cut) 0 0)}.t-icon[_ngcontent-%COMP%]    >*{font-size:1rem}.t-icon_blank[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:none;color:var(--tui-base-06);-webkit-clip-path:inset(0 0 0 var(--t-cut));clip-path:inset(0 0 0 var(--t-cut))}.t-icon_fraction[_ngcontent-%COMP%]{display:block}@media (any-pointer: coarse){._active[_nghost-%COMP%]   .t-item_active[_ngcontent-%COMP%]{transform:scale(.85);transition-timing-function:ease-in-out}.t-range[_ngcontent-%COMP%]{pointer-events:auto}.t-icon[_ngcontent-%COMP%]{transition:none}}\"],\n    changeDetection: 0\n  });\n  return TuiRatingComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiRatingModule = /*#__PURE__*/(() => {\n  class TuiRatingModule {}\n  TuiRatingModule.ɵfac = function TuiRatingModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiRatingModule)();\n  };\n  TuiRatingModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiRatingModule\n  });\n  TuiRatingModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, FormsModule, TuiIconModule, TuiRepeatTimesModule, PolymorpheusModule]]\n  });\n  return TuiRatingModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_RATING_DEFAULT_OPTIONS, TUI_RATING_OPTIONS, TuiRatingComponent, TuiRatingModule, tuiRatingOptionsProvider };\n//# sourceMappingURL=taiga-ui-experimental-components-rating.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}