{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, ElementRef, Component, ChangeDetectionStrategy, Inject, Input, HostBinding, Output, ViewChild, HostListener, NgModule } from '@angular/core';\nimport * as i1 from '@taiga-ui/core';\nimport { tuiSizeBigger, TUI_MODE, TUI_COMMON_ICONS, MODE_PROVIDER, TuiSvgModule, TuiLoaderModule } from '@taiga-ui/core';\nimport { tuiStringHashToHsl } from '@taiga-ui/kit/utils/format';\nimport { tuiCreateToken, tuiProvideOptions } from '@taiga-ui/cdk';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i3 from '@tinkoff/ng-polymorpheus';\nimport { PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport * as i4 from '@angular/forms';\nimport { FormsModule } from '@angular/forms';\nimport * as i5 from 'rxjs';\n\n/** Default values for the tag options. */\nconst _c0 = [\"input\"];\nfunction TuiTagComponent_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const text_r1 = ctx.polymorpheusOutlet;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", text_r1, \" \");\n  }\n}\nfunction TuiTagComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, TuiTagComponent_div_1_ng_container_1_Template, 2, 1, \"ng-container\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"polymorpheusOutlet\", ctx_r1.leftContent);\n  }\n}\nfunction TuiTagComponent_tui_loader_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tui-loader\", 9);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"inheritColor\", true)(\"size\", ctx_r1.loaderSize);\n  }\n}\nfunction TuiTagComponent_tui_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tui-svg\", 10);\n    i0.ɵɵlistener(\"click\", function TuiTagComponent_tui_svg_4_Template_tui_svg_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.remove($event));\n    })(\"mousedown.stop.prevent.silent\", function TuiTagComponent_tui_svg_4_Template_tui_svg_mousedown_stop_prevent_silent_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      return i0.ɵɵresetView(0);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.icons.close);\n  }\n}\nfunction TuiTagComponent_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 11, 0);\n    i0.ɵɵlistener(\"blur\", function TuiTagComponent_input_5_Template_input_blur_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onBlur());\n    })(\"keydown\", function TuiTagComponent_input_5_Template_input_keydown_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onKeyDown($event));\n    })(\"ngModelChange\", function TuiTagComponent_input_5_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onInput($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.editedText);\n    i0.ɵɵattribute(\"maxLength\", ctx_r1.maxLength);\n  }\n}\nconst TUI_TAG_DEFAULT_OPTIONS = {\n  size: 'm',\n  status: 'default',\n  autoColor: false\n};\n/**\n * Default parameters for Tag component\n */\nconst TUI_TAG_OPTIONS = tuiCreateToken(TUI_TAG_DEFAULT_OPTIONS);\nfunction tuiTagOptionsProvider(options) {\n  return tuiProvideOptions(TUI_TAG_OPTIONS, options, TUI_TAG_DEFAULT_OPTIONS);\n}\nlet TuiTagComponent = /*#__PURE__*/(() => {\n  class TuiTagComponent {\n    constructor(el, mode$, options, icons) {\n      this.el = el;\n      this.mode$ = mode$;\n      this.options = options;\n      this.icons = icons;\n      // TODO: Possibly implement standard focus mechanisms and outline\n      this.value = '';\n      this.editable = false;\n      this.separator = ',';\n      this.maxLength = null;\n      this.size = this.options.size;\n      this.showLoader = false;\n      this.status = this.options.status;\n      this.hoverable = false;\n      this.removable = false;\n      this.disabled = false;\n      this.autoColor = this.options.autoColor;\n      this.edited = new EventEmitter();\n      this.editing = false;\n      this.editedText = null;\n    }\n    set input(input) {\n      if (input) {\n        input.nativeElement.focus();\n      }\n    }\n    get backgroundColor() {\n      return this.autoColor ? tuiStringHashToHsl(this.value) : null;\n    }\n    get canRemove() {\n      return this.removable && !this.disabled && !this.showLoader;\n    }\n    get displayText() {\n      return this.editedText === null ? this.value : this.editedText;\n    }\n    get loaderSize() {\n      return tuiSizeBigger(this.size) ? 's' : 'xs';\n    }\n    edit(event) {\n      if (!this.canEdit) {\n        return;\n      }\n      event.preventDefault();\n      this.editing = true;\n      this.editedText = this.value;\n    }\n    remove(event) {\n      if (!this.canRemove) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      this.edited.emit('');\n    }\n    onInput(value) {\n      const newTags = value.split(this.separator);\n      if (newTags.length > 1) {\n        this.save(String(newTags));\n        return;\n      }\n      this.editedText = value;\n    }\n    onKeyDown(event) {\n      event.stopPropagation();\n      switch (event.key.toLowerCase()) {\n        case 'enter':\n          event.preventDefault();\n          this.save(this.editedText || '');\n          break;\n        case 'escape':\n        case 'esc':\n          event.preventDefault();\n          this.stopEditing();\n          this.el.nativeElement.focus();\n          break;\n        default:\n          break;\n      }\n    }\n    onBlur() {\n      if (this.editedText !== null) {\n        this.save(this.editedText);\n      }\n    }\n    get canEdit() {\n      return this.editable && !this.disabled && !this.showLoader;\n    }\n    stopEditing() {\n      this.editing = false;\n      this.editedText = null;\n    }\n    save(value) {\n      this.stopEditing();\n      this.edited.emit(value.trim());\n    }\n  }\n  TuiTagComponent.ɵfac = function TuiTagComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiTagComponent)(i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TUI_MODE), i0.ɵɵdirectiveInject(TUI_TAG_OPTIONS), i0.ɵɵdirectiveInject(TUI_COMMON_ICONS));\n  };\n  TuiTagComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiTagComponent,\n    selectors: [[\"tui-tag\"], [\"a\", \"tuiTag\", \"\"], [\"button\", \"tuiTag\", \"\"]],\n    viewQuery: function TuiTagComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5, ElementRef);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n      }\n    },\n    hostVars: 10,\n    hostBindings: function TuiTagComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"$.data-mode.attr\", function TuiTagComponent___data_mode_attr_HostBindingHandler() {\n          return ctx.mode$;\n        })(\"keydown.enter\", function TuiTagComponent_keydown_enter_HostBindingHandler($event) {\n          return ctx.edit($event);\n        })(\"keydown.delete\", function TuiTagComponent_keydown_delete_HostBindingHandler($event) {\n          return ctx.remove($event);\n        })(\"keydown.backspace\", function TuiTagComponent_keydown_backspace_HostBindingHandler($event) {\n          return ctx.remove($event);\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵattribute(\"data-size\", ctx.size)(\"data-status\", ctx.status);\n        i0.ɵɵclassProp(\"_hoverable\", ctx.hoverable)(\"_disabled\", ctx.disabled)(\"_autocolor\", ctx.autoColor)(\"_editing\", ctx.editing);\n      }\n    },\n    inputs: {\n      value: \"value\",\n      editable: \"editable\",\n      separator: \"separator\",\n      maxLength: \"maxLength\",\n      size: \"size\",\n      showLoader: \"showLoader\",\n      status: \"status\",\n      hoverable: \"hoverable\",\n      removable: \"removable\",\n      disabled: \"disabled\",\n      autoColor: \"autoColor\",\n      leftContent: \"leftContent\"\n    },\n    outputs: {\n      edited: \"edited\"\n    },\n    standalone: false,\n    features: [i0.ɵɵProvidersFeature([MODE_PROVIDER])],\n    decls: 6,\n    vars: 7,\n    consts: [[\"input\", \"\"], [1, \"t-tag\", 3, \"dblclick\"], [\"class\", \"t-content\", 4, \"ngIf\"], [\"automation-id\", \"tui-tag__text\", 1, \"t-text\", 3, \"textContent\"], [\"class\", \"t-content\", 3, \"inheritColor\", \"size\", 4, \"ngIf\"], [\"automation-id\", \"tui-tag__remove\", \"class\", \"t-icon\", 3, \"src\", \"click\", \"mousedown.stop.prevent.silent\", 4, \"ngIf\"], [\"automation-id\", \"tui-tag__edit\", \"type\", \"text\", \"class\", \"t-edit\", 3, \"ngModel\", \"blur\", \"keydown\", \"ngModelChange\", 4, \"ngIf\"], [1, \"t-content\"], [4, \"polymorpheusOutlet\"], [1, \"t-content\", 3, \"inheritColor\", \"size\"], [\"automation-id\", \"tui-tag__remove\", 1, \"t-icon\", 3, \"click\", \"mousedown.stop.prevent.silent\", \"src\"], [\"automation-id\", \"tui-tag__edit\", \"type\", \"text\", 1, \"t-edit\", 3, \"blur\", \"keydown\", \"ngModelChange\", \"ngModel\"]],\n    template: function TuiTagComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 1);\n        i0.ɵɵlistener(\"dblclick\", function TuiTagComponent_Template_div_dblclick_0_listener($event) {\n          return ctx.edit($event);\n        });\n        i0.ɵɵtemplate(1, TuiTagComponent_div_1_Template, 2, 1, \"div\", 2);\n        i0.ɵɵelement(2, \"span\", 3);\n        i0.ɵɵtemplate(3, TuiTagComponent_tui_loader_3_Template, 1, 2, \"tui-loader\", 4)(4, TuiTagComponent_tui_svg_4_Template, 1, 1, \"tui-svg\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, TuiTagComponent_input_5_Template, 2, 2, \"input\", 6);\n      }\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"background-color\", ctx.backgroundColor);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.leftContent);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"textContent\", ctx.displayText);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.showLoader);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.canRemove);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.editing);\n      }\n    },\n    dependencies: [i1.TuiLoaderComponent, i1.TuiSvgComponent, i2.NgIf, i3.PolymorpheusOutletDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\"[_nghost-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;display:inline-block;font:var(--tui-font-text-s);line-height:1.25rem;max-width:100%;cursor:default;outline:none;text-decoration:none;padding:0;border:0}[_nghost-%COMP%]:after{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;top:0;left:0;width:100%;height:100%;content:\\\"\\\";box-sizing:border-box;border-radius:inherit;pointer-events:none}._hoverable[_nghost-%COMP%]:hover[data-status=custom]:after, ._hoverable[_nghost-%COMP%]:active[data-status=custom]:after{background-color:var(--tui-clear)}[_nghost-%COMP%]:focus:after{border:2px solid var(--tui-focus)}[data-size=s][_nghost-%COMP%]{font:var(--tui-font-text-xs);line-height:1.25rem;border-radius:var(--tui-radius-xs)}[data-size=m][_nghost-%COMP%]{border-radius:var(--tui-radius-xs)}[data-size=l][_nghost-%COMP%]{border-radius:var(--tui-radius-s)}[data-status=primary][_nghost-%COMP%]{background-color:var(--tui-primary);color:var(--tui-primary-text)}[data-status=primary]._hoverable[_nghost-%COMP%]:hover{background-color:var(--tui-primary-hover)}[data-status=primary]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-primary-active)}[data-status=error][_nghost-%COMP%]{background-color:var(--tui-error-bg);color:var(--tui-text-01)}[data-status=error]._hoverable[_nghost-%COMP%]:hover, [data-status=error]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-error-bg-hover)}[data-status=error][data-mode=onDark][_nghost-%COMP%]{background-color:var(--tui-error-bg-night);color:var(--tui-text-01-night)}[data-status=error][data-mode=onDark]._hoverable[_nghost-%COMP%]:hover, [data-status=error][data-mode=onDark]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-error-bg-night-hover)}[data-status=success][_nghost-%COMP%]{background-color:var(--tui-success-bg);color:var(--tui-text-01)}[data-status=success]._hoverable[_nghost-%COMP%]:hover, [data-status=success]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-success-bg-hover)}[data-status=success][data-mode=onDark][_nghost-%COMP%]{background-color:var(--tui-success-bg-night);color:var(--tui-text-01-night)}[data-status=success][data-mode=onDark]._hoverable[_nghost-%COMP%]:hover, [data-status=success][data-mode=onDark]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-success-bg-night-hover)}[data-status=warning][_nghost-%COMP%]{background-color:var(--tui-warning-bg);color:var(--tui-text-01)}[data-status=warning]._hoverable[_nghost-%COMP%]:hover, [data-status=warning]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-warning-bg-hover)}[data-status=warning][data-mode=onDark][_nghost-%COMP%]{background-color:var(--tui-warning-bg-night);color:var(--tui-text-01-night)}[data-status=warning][data-mode=onDark]._hoverable[_nghost-%COMP%]:hover, [data-status=warning][data-mode=onDark]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-warning-bg-night-hover)}[data-status=default][_nghost-%COMP%]{color:var(--tui-text-01-night);background-color:var(--tui-base-06)}[data-status=default][_nghost-%COMP%]:not([data-mode])._hoverable:hover{background-color:var(--tui-base-07)}[data-status=default][_nghost-%COMP%]:not([data-mode])._hoverable:active{background-color:var(--tui-base-08)}[data-status=default][data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-01-night);background-color:var(--tui-clear-inverse)}[data-status=default][data-mode=onDark]._hoverable[_nghost-%COMP%]:hover{background-color:var(--tui-clear-inverse-hover)}[data-status=default][data-mode=onDark]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-clear-inverse-active)}[data-status=default][data-mode=onDark][_nghost-%COMP%]:focus:after{border:2px solid var(--tui-base-01)}[data-status=default][data-mode=onLight][_nghost-%COMP%]{background-color:var(--tui-clear);color:var(--tui-text-01)}[data-status=default][data-mode=onLight]._hoverable[_nghost-%COMP%]:hover{background-color:var(--tui-clear-hover)}[data-status=default][data-mode=onLight]._hoverable[_nghost-%COMP%]:active{background-color:var(--tui-clear-active)}._editing[_nghost-%COMP%]{background:transparent!important}._disabled[_nghost-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}._hoverable[_nghost-%COMP%]{cursor:pointer}._autocolor[_nghost-%COMP%]{color:#000c}.t-text[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;text-overflow:ellipsis;padding-right:.02em}.t-tag[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:relative;display:flex;width:auto;align-items:center;font:inherit;border-radius:inherit}[data-size=s][_nghost-%COMP%]   .t-tag[_ngcontent-%COMP%]{height:1.25rem;padding:0 .375rem}[data-size=m][_nghost-%COMP%]   .t-tag[_ngcontent-%COMP%]{height:var(--tui-height-xs);padding:0 .5rem}[data-size=l][_nghost-%COMP%]   .t-tag[_ngcontent-%COMP%]{height:var(--tui-height-s);padding:0 .75rem}._editing[_nghost-%COMP%]   .t-tag[_ngcontent-%COMP%]{visibility:hidden}.t-edit[_ngcontent-%COMP%]{margin:0;border-width:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;font:inherit;color:var(--tui-text-01);width:100%;height:100%;box-sizing:border-box;padding:0 .5rem}.t-edit[_ngcontent-%COMP%]:-webkit-autofill, .t-edit[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-edit[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}[data-size=s][_nghost-%COMP%]   .t-edit[_ngcontent-%COMP%]{padding:0 .375rem}[data-size=m][_nghost-%COMP%]   .t-edit[_ngcontent-%COMP%]{padding:0 .5rem}[data-size=l][_nghost-%COMP%]   .t-edit[_ngcontent-%COMP%]{padding:0 .75rem}.t-icon[_ngcontent-%COMP%]{width:1rem;height:100%;cursor:pointer;pointer-events:all;opacity:var(--tui-disabled-opacity);-webkit-margin-start:.25rem;margin-inline-start:.25rem;-webkit-margin-end:-.25rem;margin-inline-end:-.25rem}.t-icon[_ngcontent-%COMP%]:hover{opacity:1}[data-size=s][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{-webkit-margin-start:0;margin-inline-start:0}[data-size=s][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]     svg{transform:scale(.75)}.t-content[_ngcontent-%COMP%]{width:1rem;height:1rem;-webkit-margin-end:.25rem;margin-inline-end:.25rem}\"],\n    changeDetection: 0\n  });\n  return TuiTagComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiTagModule = /*#__PURE__*/(() => {\n  class TuiTagModule {}\n  TuiTagModule.ɵfac = function TuiTagModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiTagModule)();\n  };\n  TuiTagModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiTagModule\n  });\n  TuiTagModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, FormsModule, TuiSvgModule, TuiLoaderModule, PolymorpheusModule]]\n  });\n  return TuiTagModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_TAG_DEFAULT_OPTIONS, TUI_TAG_OPTIONS, TuiTagComponent, TuiTagModule, tuiTagOptionsProvider };\n//# sourceMappingURL=taiga-ui-kit-components-tag.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}