{"ast":null,"code":"import { __decorate } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { NgZone, ElementRef, Directive, Inject, Optional, SkipSelf, Input, Output, NgModule } from '@angular/core';\nimport { tuiPure } from '@taiga-ui/cdk/decorators';\nimport { tuiZoneOptimized } from '@taiga-ui/cdk/observables';\nimport { TUI_ACTIVE_ELEMENT } from '@taiga-ui/cdk/tokens';\nimport { tuiArrayRemove } from '@taiga-ui/cdk/utils';\nimport { map, startWith, distinctUntilChanged, skip } from 'rxjs/operators';\nimport * as i1 from 'rxjs';\nlet TuiActiveZoneDirective = /*#__PURE__*/(() => {\n  class TuiActiveZoneDirective {\n    constructor(active$, zone, el, directParentActiveZone) {\n      var _a;\n      this.active$ = active$;\n      this.zone = zone;\n      this.el = el;\n      this.directParentActiveZone = directParentActiveZone;\n      this.subActiveZones = [];\n      this.tuiActiveZoneParent = null;\n      this.tuiActiveZoneChange = this.active$.pipe(map(element => !!element && this.contains(element)), startWith(false), distinctUntilChanged(), skip(1), tuiZoneOptimized(this.zone));\n      (_a = this.directParentActiveZone) === null || _a === void 0 ? void 0 : _a.addSubActiveZone(this);\n    }\n    set tuiActiveZoneParentSetter(zone) {\n      this.setZone(zone);\n    }\n    ngOnDestroy() {\n      var _a, _b;\n      (_a = this.directParentActiveZone) === null || _a === void 0 ? void 0 : _a.removeSubActiveZone(this);\n      (_b = this.tuiActiveZoneParent) === null || _b === void 0 ? void 0 : _b.removeSubActiveZone(this);\n    }\n    contains(node) {\n      return this.el.nativeElement.contains(node) || this.subActiveZones.some((item, index, array) => array.indexOf(item) === index && item.contains(node));\n    }\n    setZone(zone) {\n      var _a;\n      (_a = this.tuiActiveZoneParent) === null || _a === void 0 ? void 0 : _a.removeSubActiveZone(this);\n      zone === null || zone === void 0 ? void 0 : zone.addSubActiveZone(this);\n      this.tuiActiveZoneParent = zone;\n    }\n    addSubActiveZone(activeZone) {\n      this.subActiveZones = [...this.subActiveZones, activeZone];\n    }\n    removeSubActiveZone(activeZone) {\n      this.subActiveZones = tuiArrayRemove(this.subActiveZones, this.subActiveZones.indexOf(activeZone));\n    }\n  }\n  TuiActiveZoneDirective.ɵfac = function TuiActiveZoneDirective_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiActiveZoneDirective)(i0.ɵɵdirectiveInject(TUI_ACTIVE_ELEMENT), i0.ɵɵdirectiveInject(NgZone), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TuiActiveZoneDirective, 12));\n  };\n  TuiActiveZoneDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiActiveZoneDirective,\n    selectors: [[\"\", \"tuiActiveZone\", \"\", 5, \"ng-container\"], [\"\", \"tuiActiveZoneChange\", \"\", 5, \"ng-container\"], [\"\", \"tuiActiveZoneParent\", \"\", 5, \"ng-container\"]],\n    hostBindings: function TuiActiveZoneDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mousedown.silent\", function TuiActiveZoneDirective_mousedown_silent_HostBindingHandler() {\n          return 0;\n        }, i0.ɵɵresolveDocument);\n      }\n    },\n    inputs: {\n      tuiActiveZoneParentSetter: [0, \"tuiActiveZoneParent\", \"tuiActiveZoneParentSetter\"]\n    },\n    outputs: {\n      tuiActiveZoneChange: \"tuiActiveZoneChange\"\n    },\n    exportAs: [\"tuiActiveZone\"],\n    standalone: false\n  });\n  __decorate([tuiPure], TuiActiveZoneDirective.prototype, \"setZone\", null);\n  return TuiActiveZoneDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiActiveZoneModule = /*#__PURE__*/(() => {\n  class TuiActiveZoneModule {}\n  TuiActiveZoneModule.ɵfac = function TuiActiveZoneModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || TuiActiveZoneModule)();\n  };\n  TuiActiveZoneModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiActiveZoneModule\n  });\n  TuiActiveZoneModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiActiveZoneModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiActiveZoneDirective, TuiActiveZoneModule };\n//# sourceMappingURL=taiga-ui-cdk-directives-active-zone.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}